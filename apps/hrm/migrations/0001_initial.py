# Generated by Django 5.2.6 on 2025-12-10 13:39

from decimal import Decimal

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models

import apps.hrm.models.attendance_geolocation
import apps.hrm.utils.validators
import libs.models.fields


class Migration(migrations.Migration):
    initial = True

    dependencies = [
        ("core", "0001_initial"),
        ("files", "0001_initial"),
        ("realestate", "0001_initial"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name="Bank",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("name", models.CharField(max_length=255, verbose_name="Bank name")),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Bank code")),
            ],
            options={
                "verbose_name": "Bank",
                "verbose_name_plural": "Banks",
                "db_table": "hrm_bank",
                "ordering": ["id"],
            },
        ),
        migrations.CreateModel(
            name="Block",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("name", models.CharField(max_length=200, verbose_name="Block name")),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Block code")),
                (
                    "block_type",
                    models.CharField(
                        choices=[("support", "Support Block"), ("business", "Business Block")],
                        max_length=20,
                        verbose_name="Block type",
                    ),
                ),
                ("description", libs.models.fields.SafeTextField(blank=True, verbose_name="Description")),
                ("is_active", models.BooleanField(default=True, verbose_name="Active")),
            ],
            options={
                "verbose_name": "Block",
                "verbose_name_plural": "Blocks",
                "db_table": "hrm_block",
            },
        ),
        migrations.CreateModel(
            name="Position",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("name", models.CharField(max_length=200, verbose_name="Position name")),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Position code")),
                (
                    "data_scope",
                    models.CharField(
                        choices=[
                            ("all", "All data"),
                            ("branch", "Branch level"),
                            ("block", "Block level"),
                            ("department", "Department level"),
                            ("self", "Self only"),
                        ],
                        default="department",
                        max_length=20,
                        verbose_name="Data scope",
                    ),
                ),
                ("is_leadership", models.BooleanField(default=False, verbose_name="Leadership position")),
                (
                    "include_in_employee_report",
                    models.BooleanField(default=True, verbose_name="Include in Employee report"),
                ),
                ("description", libs.models.fields.SafeTextField(blank=True, verbose_name="Description")),
                ("is_active", models.BooleanField(default=True, verbose_name="Active")),
            ],
            options={
                "verbose_name": "Position",
                "verbose_name_plural": "Positions",
                "db_table": "hrm_position",
                "ordering": ["name"],
            },
        ),
        migrations.CreateModel(
            name="RecruitmentChannel",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("name", models.CharField(max_length=250, verbose_name="Channel name")),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Channel code")),
                (
                    "belong_to",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("job_website", "Job Website"),
                            ("marketing", "Marketing"),
                            ("hunt", "Hunt"),
                            ("school", "School"),
                            ("other", "Other"),
                        ],
                        default="",
                        max_length=20,
                        verbose_name="Belong to",
                    ),
                ),
                (
                    "description",
                    libs.models.fields.SafeTextField(blank=True, max_length=500, verbose_name="Description"),
                ),
                ("is_active", models.BooleanField(default=True, verbose_name="Active")),
            ],
            options={
                "verbose_name": "Recruitment Channel",
                "verbose_name_plural": "Recruitment Channels",
                "db_table": "hrm_recruitment_channel",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="RecruitmentSource",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("name", models.CharField(max_length=250, verbose_name="Source name")),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Source code")),
                (
                    "description",
                    libs.models.fields.SafeTextField(blank=True, max_length=500, verbose_name="Description"),
                ),
                (
                    "allow_referral",
                    models.BooleanField(
                        default=False,
                        help_text="Enable users to set referrer and referee for candidates from this source",
                        verbose_name="Allow referral",
                    ),
                ),
            ],
            options={
                "verbose_name": "Recruitment Source",
                "verbose_name_plural": "Recruitment Sources",
                "db_table": "hrm_recruitment_source",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="WorkSchedule",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "weekday",
                    models.PositiveSmallIntegerField(
                        choices=[
                            (2, "Monday"),
                            (3, "Tuesday"),
                            (4, "Wednesday"),
                            (5, "Thursday"),
                            (6, "Friday"),
                            (7, "Saturday"),
                            (8, "Sunday"),
                        ],
                        help_text="Day of the week",
                        unique=True,
                        verbose_name="Weekday",
                    ),
                ),
                (
                    "morning_start_time",
                    models.TimeField(
                        blank=True,
                        help_text="Start time of morning session",
                        null=True,
                        verbose_name="Morning start time",
                    ),
                ),
                (
                    "morning_end_time",
                    models.TimeField(
                        blank=True, help_text="End time of morning session", null=True, verbose_name="Morning end time"
                    ),
                ),
                (
                    "noon_start_time",
                    models.TimeField(
                        blank=True, help_text="Start time of noon session", null=True, verbose_name="Noon start time"
                    ),
                ),
                (
                    "noon_end_time",
                    models.TimeField(
                        blank=True, help_text="End time of noon session", null=True, verbose_name="Noon end time"
                    ),
                ),
                (
                    "afternoon_start_time",
                    models.TimeField(
                        blank=True,
                        help_text="Start time of afternoon session",
                        null=True,
                        verbose_name="Afternoon start time",
                    ),
                ),
                (
                    "afternoon_end_time",
                    models.TimeField(
                        blank=True,
                        help_text="End time of afternoon session",
                        null=True,
                        verbose_name="Afternoon end time",
                    ),
                ),
                (
                    "allowed_late_minutes",
                    models.IntegerField(
                        blank=True,
                        help_text="Number of minutes late allowed",
                        null=True,
                        verbose_name="Allowed late minutes",
                    ),
                ),
                (
                    "note",
                    models.CharField(
                        blank=True, help_text="Additional notes", max_length=255, null=True, verbose_name="Note"
                    ),
                ),
            ],
            options={
                "verbose_name": "Work schedule",
                "verbose_name_plural": "Work schedules",
                "db_table": "hrm_work_schedule",
                "ordering": ["weekday"],
            },
        ),
        migrations.CreateModel(
            name="AttendanceGeolocation",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("name", models.CharField(max_length=200, verbose_name="Geolocation name")),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Geolocation code")),
                ("address", libs.models.fields.SafeTextField(blank=True, verbose_name="Address")),
                (
                    "latitude",
                    models.DecimalField(
                        decimal_places=17,
                        help_text="Latitude coordinate",
                        max_digits=20,
                        validators=[apps.hrm.models.attendance_geolocation.validate_latitude],
                        verbose_name="Latitude",
                    ),
                ),
                (
                    "longitude",
                    models.DecimalField(
                        decimal_places=17,
                        help_text="Longitude coordinate",
                        max_digits=20,
                        validators=[apps.hrm.models.attendance_geolocation.validate_longitude],
                        verbose_name="Longitude",
                    ),
                ),
                (
                    "radius_m",
                    models.IntegerField(
                        default=100,
                        help_text="Radius in meters for geofencing",
                        validators=[django.core.validators.MinValueValidator(1)],
                        verbose_name="Radius (meters)",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[("active", "Active"), ("inactive", "Inactive")],
                        default="active",
                        max_length=20,
                        verbose_name="Status",
                    ),
                ),
                ("notes", libs.models.fields.SafeTextField(blank=True, verbose_name="Notes")),
                ("deleted", models.BooleanField(default=False, verbose_name="Deleted")),
                ("deleted_at", models.DateTimeField(blank=True, null=True, verbose_name="Deleted at")),
                (
                    "created_by",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="created_geolocations",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Created by",
                    ),
                ),
                (
                    "project",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="attendance_geolocations",
                        to="realestate.project",
                        verbose_name="Project",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="updated_geolocations",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Updated by",
                    ),
                ),
            ],
            options={
                "verbose_name": "Attendance Geolocation",
                "verbose_name_plural": "Attendance Geolocations",
                "db_table": "hrm_attendance_geolocation",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="AttendanceDevice",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Code")),
                (
                    "name",
                    models.CharField(help_text="Name for the device", max_length=200, verbose_name="Device name"),
                ),
                (
                    "ip_address",
                    models.CharField(
                        help_text="Network address for device communication",
                        max_length=255,
                        verbose_name="IP address or domain",
                    ),
                ),
                (
                    "port",
                    models.PositiveIntegerField(
                        help_text="Network port for device communication", verbose_name="Port"
                    ),
                ),
                (
                    "password",
                    models.CharField(
                        blank=True,
                        help_text="Authentication password for device access",
                        max_length=100,
                        verbose_name="Password",
                    ),
                ),
                (
                    "serial_number",
                    models.CharField(
                        blank=True,
                        help_text="Manufacturer's device serial number",
                        max_length=100,
                        verbose_name="Serial number",
                    ),
                ),
                (
                    "registration_number",
                    models.CharField(
                        blank=True,
                        help_text="Device registration or license number",
                        max_length=100,
                        verbose_name="Registration number",
                    ),
                ),
                (
                    "is_enabled",
                    models.BooleanField(
                        default=True,
                        help_text="Whether the device is enabled for automatic synchronization",
                        verbose_name="Is enabled",
                    ),
                ),
                (
                    "is_connected",
                    models.BooleanField(
                        default=False,
                        help_text="Whether the device is currently online and reachable",
                        verbose_name="Connection status",
                    ),
                ),
                (
                    "realtime_enabled",
                    models.BooleanField(
                        default=True,
                        help_text="Whether realtime listener is enabled for this device",
                        verbose_name="Realtime enabled",
                    ),
                ),
                (
                    "realtime_disabled_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="Timestamp when realtime was disabled due to connection failures",
                        null=True,
                        verbose_name="Realtime disabled at",
                    ),
                ),
                (
                    "polling_synced_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="Timestamp of last successful polling sync from device",
                        null=True,
                        verbose_name="Last polling sync",
                    ),
                ),
                (
                    "note",
                    models.TextField(
                        blank=True,
                        default="",
                        help_text="Additional notes or comments about the device",
                        verbose_name="Note",
                    ),
                ),
                (
                    "block",
                    models.ForeignKey(
                        blank=True,
                        help_text="Organization Block where device is installed",
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="attendance_devices",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
            ],
            options={
                "verbose_name": "Attendance Device",
                "verbose_name_plural": "Attendance Devices",
                "db_table": "hrm_attendance_device",
                "ordering": ["name"],
            },
        ),
        migrations.CreateModel(
            name="Branch",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("name", models.CharField(max_length=200, verbose_name="Branch name")),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Branch code")),
                ("address", libs.models.fields.SafeTextField(blank=True, verbose_name="Address")),
                ("phone", models.CharField(blank=True, max_length=1000, verbose_name="Phone number")),
                ("email", models.EmailField(blank=True, max_length=254, verbose_name="Email")),
                ("description", libs.models.fields.SafeTextField(blank=True, verbose_name="Description")),
                ("is_active", models.BooleanField(default=True, verbose_name="Active")),
                (
                    "administrative_unit",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="branches",
                        to="core.administrativeunit",
                        verbose_name="Administrative unit",
                    ),
                ),
                (
                    "province",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="branches",
                        to="core.province",
                        verbose_name="Province",
                    ),
                ),
            ],
            options={
                "verbose_name": "Branch",
                "verbose_name_plural": "Branches",
                "db_table": "hrm_branch",
            },
        ),
        migrations.AddField(
            model_name="block",
            name="branch",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name="blocks",
                to="hrm.branch",
                verbose_name="Branch",
            ),
        ),
        migrations.CreateModel(
            name="AttendanceWifiDevice",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("name", models.CharField(max_length=100, verbose_name="WiFi name")),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="WiFi code")),
                (
                    "bssid",
                    models.CharField(
                        help_text="WiFi hardware identifier (MAC address format: XX:XX:XX:XX:XX:XX)",
                        max_length=17,
                        unique=True,
                        verbose_name="BSSID",
                    ),
                ),
                (
                    "state",
                    models.CharField(
                        choices=[("in_use", "In use"), ("not_in_use", "Not in use")],
                        default="in_use",
                        max_length=20,
                        verbose_name="State",
                    ),
                ),
                ("notes", libs.models.fields.SafeTextField(blank=True, verbose_name="Notes")),
                (
                    "block",
                    models.ForeignKey(
                        blank=True,
                        help_text="Block where this WiFi is located (must belong to selected branch)",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="attendance_wifis",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        blank=True,
                        help_text="Branch where this WiFi is located",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="attendance_wifis",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
            ],
            options={
                "verbose_name": "Attendance WiFiDevice",
                "verbose_name_plural": "Attendance WiFiDevices",
                "db_table": "hrm_attendance_wifi",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="BranchContactInfo",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("business_line", models.CharField(max_length=50, verbose_name="Business line")),
                ("name", models.CharField(max_length=100, verbose_name="Contact name")),
                ("phone_number", models.CharField(max_length=10, verbose_name="Phone number")),
                ("email", models.EmailField(max_length=254, verbose_name="Email")),
                (
                    "branch",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="contact_infos",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
            ],
            options={
                "verbose_name": "Branch contact info",
                "verbose_name_plural": "Branch contact info",
                "db_table": "hrm_branch_contact_info",
                "ordering": ["name"],
            },
        ),
        migrations.CreateModel(
            name="ContractType",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "code",
                    models.CharField(
                        blank=True,
                        help_text="Auto-generated unique contract type code",
                        max_length=50,
                        null=True,
                        unique=True,
                        verbose_name="Contract type code",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="Name of the contract type",
                        max_length=100,
                        unique=True,
                        verbose_name="Contract type name",
                    ),
                ),
                (
                    "symbol",
                    models.CharField(
                        default="",
                        help_text="Symbol or abbreviation for the contract type",
                        max_length=20,
                        verbose_name="Contract type symbol",
                    ),
                ),
                (
                    "category",
                    models.CharField(
                        choices=[("contract", "Contract"), ("appendix", "Appendix")],
                        default="contract",
                        help_text="Whether this is a contract type or appendix type",
                        max_length=20,
                        verbose_name="Category",
                    ),
                ),
                (
                    "duration_type",
                    models.CharField(
                        choices=[("indefinite", "Indefinite term"), ("fixed", "Fixed term")],
                        default="indefinite",
                        help_text="Whether the contract has a fixed term or is indefinite",
                        max_length=20,
                        verbose_name="Duration type",
                    ),
                ),
                (
                    "duration_months",
                    models.PositiveIntegerField(
                        blank=True,
                        help_text="Number of months for fixed-term contracts",
                        null=True,
                        verbose_name="Duration in months",
                    ),
                ),
                (
                    "base_salary",
                    models.DecimalField(
                        decimal_places=0,
                        default=0,
                        help_text="Base salary amount",
                        max_digits=20,
                        verbose_name="Base salary",
                    ),
                ),
                (
                    "lunch_allowance",
                    models.DecimalField(
                        blank=True,
                        decimal_places=0,
                        help_text="Lunch allowance amount",
                        max_digits=20,
                        null=True,
                        verbose_name="Lunch allowance",
                    ),
                ),
                (
                    "phone_allowance",
                    models.DecimalField(
                        blank=True,
                        decimal_places=0,
                        help_text="Phone allowance amount",
                        max_digits=20,
                        null=True,
                        verbose_name="Phone allowance",
                    ),
                ),
                (
                    "other_allowance",
                    models.DecimalField(
                        blank=True,
                        decimal_places=0,
                        help_text="Other allowance amount",
                        max_digits=20,
                        null=True,
                        verbose_name="Other allowance",
                    ),
                ),
                (
                    "net_percentage",
                    models.CharField(
                        choices=[("100", "100%"), ("85", "85%")],
                        default="100",
                        help_text="Net salary percentage (100% or 85%)",
                        max_length=5,
                        verbose_name="Net percentage",
                    ),
                ),
                (
                    "tax_calculation_method",
                    models.CharField(
                        choices=[("progressive", "Progressive tax"), ("flat_10", "10% flat tax"), ("none", "No tax")],
                        default="progressive",
                        help_text="Method for calculating tax",
                        max_length=20,
                        verbose_name="Tax calculation method",
                    ),
                ),
                (
                    "working_time_type",
                    models.CharField(
                        choices=[
                            ("full_time", "Full-time - Office hours"),
                            ("part_time", "Part-time"),
                            ("other", "Other"),
                        ],
                        default="full_time",
                        help_text="Type of working time arrangement",
                        max_length=20,
                        verbose_name="Working time type",
                    ),
                ),
                (
                    "annual_leave_days",
                    models.PositiveIntegerField(
                        default=12,
                        help_text="Number of annual leave days (maximum 12)",
                        validators=[
                            django.core.validators.MinValueValidator(0),
                            django.core.validators.MaxValueValidator(12),
                        ],
                        verbose_name="Annual leave days",
                    ),
                ),
                (
                    "has_social_insurance",
                    models.BooleanField(
                        default=True,
                        help_text="Whether social insurance is included",
                        verbose_name="Has social insurance",
                    ),
                ),
                (
                    "working_conditions",
                    libs.models.fields.SafeTextField(
                        default="",
                        help_text="Description of working conditions",
                        max_length=1000,
                        verbose_name="Working conditions",
                    ),
                ),
                (
                    "rights_and_obligations",
                    libs.models.fields.SafeTextField(
                        default="",
                        help_text="Rights and obligations of parties",
                        max_length=5000,
                        verbose_name="Rights and obligations",
                    ),
                ),
                (
                    "terms",
                    libs.models.fields.SafeTextField(
                        default="", help_text="Contract terms and conditions", max_length=5000, verbose_name="Terms"
                    ),
                ),
                (
                    "note",
                    libs.models.fields.SafeTextField(
                        blank=True, help_text="Additional notes", max_length=500, null=True, verbose_name="Note"
                    ),
                ),
                (
                    "template_file",
                    models.ForeignKey(
                        blank=True,
                        help_text="Template file for the contract",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="contract_type_templates",
                        to="files.filemodel",
                        verbose_name="Template file",
                    ),
                ),
            ],
            options={
                "verbose_name": "Contract type",
                "verbose_name_plural": "Contract types",
                "db_table": "hrm_contract_type",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="Department",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("name", models.CharField(max_length=200, verbose_name="Department name")),
                ("code", models.CharField(max_length=50, verbose_name="Department code")),
                (
                    "function",
                    models.CharField(
                        choices=[
                            ("business", "Business"),
                            ("hr_admin", "HR Administration"),
                            ("recruit_training", "Recruitment & Training"),
                            ("marketing", "Marketing"),
                            ("business_secretary", "Business Secretary"),
                            ("accounting", "Accounting"),
                            ("trading_floor", "Trading Floor"),
                            ("project_promotion", "Project Promotion"),
                            ("project_development", "Project Development"),
                        ],
                        default="business",
                        max_length=50,
                        verbose_name="Department function",
                    ),
                ),
                ("is_main_department", models.BooleanField(default=False, verbose_name="Is main department")),
                ("description", libs.models.fields.SafeTextField(blank=True, verbose_name="Description")),
                ("is_active", models.BooleanField(default=True, verbose_name="Active")),
                (
                    "block",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="departments",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="departments",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "management_department",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="managed_departments",
                        to="hrm.department",
                        verbose_name="Management department",
                    ),
                ),
                (
                    "parent_department",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="sub_departments",
                        to="hrm.department",
                        verbose_name="Parent department",
                    ),
                ),
            ],
            options={
                "verbose_name": "Department",
                "verbose_name_plural": "Departments",
                "db_table": "hrm_department",
            },
        ),
        migrations.CreateModel(
            name="Employee",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "code_type",
                    models.CharField(
                        choices=[("MV", "MV"), ("CTV", "CTV"), ("OS", "OS")],
                        default="MV",
                        max_length=10,
                        verbose_name="Employee type",
                    ),
                ),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Employee code")),
                ("fullname", models.CharField(max_length=200, verbose_name="Full name")),
                (
                    "attendance_code",
                    models.CharField(
                        max_length=20,
                        validators=[
                            django.core.validators.RegexValidator(
                                message="Attendance code must contain only digits", regex="^\\d+$"
                            )
                        ],
                        verbose_name="Attendance code",
                    ),
                ),
                ("username", models.CharField(max_length=150, unique=True, verbose_name="Username")),
                ("email", models.EmailField(max_length=254, unique=True, verbose_name="Email")),
                (
                    "employee_type",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("OFFICIAL", "Official"),
                            ("APPRENTICE", "Apprentice"),
                            ("UNPAID_OFFICIAL", "Unpaid - Official"),
                            ("UNPAID_PROBATION", "Unpaid - Probation"),
                            ("PROBATION", "Probation"),
                            ("INTERN", "Intern"),
                            ("PROBATION_TYPE_1", "Probation Type 1"),
                        ],
                        max_length=30,
                        null=True,
                        verbose_name="Employee type (classification)",
                    ),
                ),
                ("start_date", models.DateField(verbose_name="Start date")),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("Active", "Active"),
                            ("Onboarding", "Onboarding"),
                            ("Resigned", "Resigned"),
                            ("Maternity Leave", "Maternity Leave"),
                            ("Unpaid Leave", "Unpaid Leave"),
                        ],
                        default="Onboarding",
                        max_length=50,
                        verbose_name="Status",
                    ),
                ),
                (
                    "resignation_start_date",
                    models.DateField(blank=True, null=True, verbose_name="Resignation start date"),
                ),
                ("resignation_end_date", models.DateField(blank=True, null=True, verbose_name="Resignation end date")),
                (
                    "resignation_reason",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("AGREEMENT_TERMINATION", "Agreement Termination"),
                            ("PROBATION_FAIL", "Probation Fail"),
                            ("JOB_ABANDONMENT", "Job Abandonment"),
                            ("DISCIPLINARY_TERMINATION", "Disciplinary Termination"),
                            ("WORKFORCE_REDUCTION", "Workforce Reduction"),
                            ("UNDERPERFORMING", "Underperforming"),
                            ("CONTRACT_EXPIRED", "Contract Expired"),
                            ("VOLUNTARY_HEALTH", "Voluntary - Health Reasons"),
                            ("VOLUNTARY_PERSONAL", "Voluntary - Personal Reasons"),
                            ("VOLUNTARY_CAREER_CHANGE", "Voluntary - Career Change"),
                            ("VOLUNTARY_OTHER", "Voluntary - Other"),
                            ("OTHER", "Other"),
                        ],
                        max_length=50,
                        null=True,
                        verbose_name="Resignation reason",
                    ),
                ),
                ("note", libs.models.fields.SafeTextField(blank=True, verbose_name="Note")),
                ("date_of_birth", models.DateField(blank=True, null=True, verbose_name="Date of birth")),
                (
                    "gender",
                    models.CharField(
                        choices=[("MALE", "Male"), ("FEMALE", "Female")],
                        default="MALE",
                        max_length=10,
                        verbose_name="Gender",
                    ),
                ),
                (
                    "marital_status",
                    models.CharField(
                        choices=[("SINGLE", "Single"), ("MARRIED", "Married"), ("DIVORCED", "Divorced")],
                        default="SINGLE",
                        max_length=10,
                        verbose_name="Marital status",
                    ),
                ),
                ("ethnicity", models.CharField(blank=True, max_length=100, verbose_name="Ethnicity")),
                ("religion", models.CharField(blank=True, max_length=100, verbose_name="Religion")),
                (
                    "citizen_id",
                    models.CharField(
                        max_length=12,
                        unique=True,
                        validators=[
                            django.core.validators.RegexValidator(
                                message="Citizen ID must contain from 9 to 12 digits", regex="^\\d{9,12}$"
                            )
                        ],
                        verbose_name="Citizen ID",
                    ),
                ),
                (
                    "citizen_id_issued_date",
                    models.DateField(blank=True, null=True, verbose_name="Citizen ID issued date"),
                ),
                (
                    "citizen_id_issued_place",
                    models.CharField(blank=True, max_length=100, verbose_name="Citizen ID issued place"),
                ),
                ("tax_code", models.CharField(blank=True, max_length=12, verbose_name="Tax code")),
                (
                    "phone",
                    models.CharField(
                        max_length=10,
                        unique=True,
                        validators=[
                            django.core.validators.RegexValidator(
                                message="Phone number must be exactly 10 digits", regex="^\\d{10}$"
                            )
                        ],
                        verbose_name="Phone number",
                    ),
                ),
                (
                    "personal_email",
                    models.EmailField(blank=True, max_length=100, null=True, verbose_name="Personal email"),
                ),
                ("place_of_birth", models.CharField(blank=True, max_length=100, verbose_name="Place of birth")),
                (
                    "residential_address",
                    models.CharField(blank=True, max_length=255, verbose_name="Residential address"),
                ),
                ("permanent_address", models.CharField(blank=True, max_length=255, verbose_name="Permanent address")),
                (
                    "emergency_contact_name",
                    models.CharField(blank=True, max_length=100, verbose_name="Emergency contact name"),
                ),
                (
                    "emergency_contact_phone",
                    models.CharField(
                        blank=True,
                        max_length=10,
                        validators=[
                            django.core.validators.RegexValidator(
                                message="Phone number must contain only digits", regex="^\\d*$"
                            )
                        ],
                        verbose_name="Emergency contact phone",
                    ),
                ),
                (
                    "is_onboarding_email_sent",
                    models.BooleanField(default=False, verbose_name="Is onboarding email sent"),
                ),
                (
                    "available_leave_days",
                    models.IntegerField(
                        default=0,
                        help_text="Number of available leave days for the employee",
                        verbose_name="Available leave days",
                    ),
                ),
                (
                    "avatar",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="employee_avatars",
                        to="files.filemodel",
                        verbose_name="Avatar",
                    ),
                ),
                (
                    "block",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="employees",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="employees",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "citizen_id_file",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="employee_citizen_id_files",
                        to="files.filemodel",
                        verbose_name="Citizen ID file",
                    ),
                ),
                (
                    "department",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="employees",
                        to="hrm.department",
                        verbose_name="Department",
                    ),
                ),
                (
                    "nationality",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="employees",
                        to="core.nationality",
                        verbose_name="Nationality",
                    ),
                ),
                (
                    "user",
                    models.OneToOneField(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="employee",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="User",
                    ),
                ),
                (
                    "position",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="employees",
                        to="hrm.position",
                        verbose_name="Position",
                    ),
                ),
            ],
            options={
                "verbose_name": "Employee",
                "verbose_name_plural": "Employees",
                "db_table": "hrm_employee",
                "ordering": ["-id"],
            },
        ),
        migrations.AddField(
            model_name="department",
            name="leader",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="led_departments",
                to="hrm.employee",
                verbose_name="Department leader",
            ),
        ),
        migrations.CreateModel(
            name="Decision",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "decision_number",
                    models.CharField(
                        help_text="Unique decision number/code",
                        max_length=50,
                        unique=True,
                        verbose_name="Decision number",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="Name or title of the decision", max_length=500, verbose_name="Decision name"
                    ),
                ),
                (
                    "signing_date",
                    models.DateField(help_text="Date when the decision was signed", verbose_name="Signing date"),
                ),
                (
                    "effective_date",
                    models.DateField(
                        help_text="Date when the decision becomes effective", verbose_name="Effective date"
                    ),
                ),
                (
                    "reason",
                    libs.models.fields.SafeTextField(
                        blank=True,
                        help_text="Reason for the decision",
                        max_length=500,
                        null=True,
                        verbose_name="Reason",
                    ),
                ),
                (
                    "content",
                    libs.models.fields.SafeTextField(
                        blank=True,
                        help_text="Full content of the decision",
                        max_length=2000,
                        null=True,
                        verbose_name="Decision content",
                    ),
                ),
                (
                    "note",
                    libs.models.fields.SafeTextField(
                        blank=True, help_text="Additional notes", max_length=1000, null=True, verbose_name="Note"
                    ),
                ),
                (
                    "signing_status",
                    models.CharField(
                        choices=[("draft", "Draft"), ("issued", "Issued")],
                        default="draft",
                        help_text="Current signing status of the decision",
                        max_length=20,
                        verbose_name="Signing status",
                    ),
                ),
                (
                    "signer",
                    models.ForeignKey(
                        help_text="Employee who signed the decision",
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="signed_decisions",
                        to="hrm.employee",
                        verbose_name="Signer",
                    ),
                ),
            ],
            options={
                "verbose_name": "Decision",
                "verbose_name_plural": "Decisions",
                "db_table": "hrm_decision",
                "ordering": ["-signing_date", "-created_at"],
            },
        ),
        migrations.CreateModel(
            name="Contract",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "code",
                    models.CharField(
                        blank=True,
                        help_text="Auto-generated unique contract code",
                        max_length=50,
                        null=True,
                        unique=True,
                        verbose_name="Contract code",
                    ),
                ),
                (
                    "contract_number",
                    models.CharField(
                        blank=True,
                        help_text="Business number (e.g., 01/2025/HDLD-MVL or 01/2025/PLHD-MVL)",
                        max_length=50,
                        null=True,
                        unique=True,
                        verbose_name="Contract number",
                    ),
                ),
                (
                    "duration_type",
                    models.CharField(
                        choices=[("indefinite", "Indefinite term"), ("fixed", "Fixed term")],
                        default="indefinite",
                        help_text="Whether the contract has a fixed term or is indefinite",
                        max_length=20,
                        verbose_name="Duration type",
                    ),
                ),
                (
                    "duration_months",
                    models.PositiveIntegerField(
                        blank=True,
                        help_text="Number of months for fixed-term contracts",
                        null=True,
                        verbose_name="Duration in months",
                    ),
                ),
                (
                    "sign_date",
                    models.DateField(help_text="Date when the contract was signed", verbose_name="Sign date"),
                ),
                (
                    "effective_date",
                    models.DateField(
                        help_text="Date when the contract becomes effective", verbose_name="Effective date"
                    ),
                ),
                (
                    "expiration_date",
                    models.DateField(
                        blank=True,
                        help_text="Date when the contract expires (null for indefinite contracts)",
                        null=True,
                        verbose_name="Expiration date",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("draft", "Draft"),
                            ("not_effective", "Not effective"),
                            ("active", "Active"),
                            ("about_to_expire", "About to expire"),
                            ("expired", "Expired"),
                        ],
                        default="draft",
                        help_text="Current status of the contract",
                        max_length=20,
                        verbose_name="Contract status",
                    ),
                ),
                (
                    "base_salary",
                    models.DecimalField(
                        decimal_places=0,
                        default=0,
                        help_text="Base salary amount at the time of contract",
                        max_digits=20,
                        verbose_name="Base salary",
                    ),
                ),
                (
                    "kpi_salary",
                    models.DecimalField(
                        decimal_places=0,
                        default=0,
                        help_text="KPI salary amount at the time of contract",
                        max_digits=20,
                        verbose_name="KPI salary",
                    ),
                ),
                (
                    "lunch_allowance",
                    models.DecimalField(
                        blank=True,
                        decimal_places=0,
                        help_text="Lunch allowance amount at the time of contract",
                        max_digits=20,
                        null=True,
                        verbose_name="Lunch allowance",
                    ),
                ),
                (
                    "phone_allowance",
                    models.DecimalField(
                        blank=True,
                        decimal_places=0,
                        help_text="Phone allowance amount at the time of contract",
                        max_digits=20,
                        null=True,
                        verbose_name="Phone allowance",
                    ),
                ),
                (
                    "other_allowance",
                    models.DecimalField(
                        blank=True,
                        decimal_places=0,
                        help_text="Other allowance amount at the time of contract",
                        max_digits=20,
                        null=True,
                        verbose_name="Other allowance",
                    ),
                ),
                (
                    "net_percentage",
                    models.CharField(
                        choices=[("100", "100%"), ("85", "85%")],
                        default="100",
                        help_text="Net salary percentage at the time of contract",
                        max_length=5,
                        verbose_name="Net percentage",
                    ),
                ),
                (
                    "tax_calculation_method",
                    models.CharField(
                        choices=[("progressive", "Progressive tax"), ("flat_10", "10% flat tax"), ("none", "No tax")],
                        default="progressive",
                        help_text="Tax calculation method at the time of contract",
                        max_length=20,
                        verbose_name="Tax calculation method",
                    ),
                ),
                (
                    "working_time_type",
                    models.CharField(
                        choices=[
                            ("full_time", "Full-time - Office hours"),
                            ("part_time", "Part-time"),
                            ("other", "Other"),
                        ],
                        default="full_time",
                        help_text="Type of working time arrangement",
                        max_length=20,
                        verbose_name="Working time type",
                    ),
                ),
                (
                    "annual_leave_days",
                    models.PositiveIntegerField(
                        default=12,
                        help_text="Number of annual leave days (maximum 12)",
                        validators=[
                            django.core.validators.MinValueValidator(0),
                            django.core.validators.MaxValueValidator(12),
                        ],
                        verbose_name="Annual leave days",
                    ),
                ),
                (
                    "has_social_insurance",
                    models.BooleanField(
                        default=True,
                        help_text="Whether social insurance is included",
                        verbose_name="Has social insurance",
                    ),
                ),
                (
                    "working_conditions",
                    libs.models.fields.SafeTextField(
                        default="",
                        help_text="Working conditions at the time of contract",
                        max_length=1000,
                        verbose_name="Working conditions",
                    ),
                ),
                (
                    "rights_and_obligations",
                    libs.models.fields.SafeTextField(
                        default="",
                        help_text="Rights and obligations at the time of contract",
                        max_length=5000,
                        verbose_name="Rights and obligations",
                    ),
                ),
                (
                    "terms",
                    libs.models.fields.SafeTextField(
                        default="",
                        help_text="Contract terms and conditions at the time of contract",
                        max_length=5000,
                        verbose_name="Terms",
                    ),
                ),
                (
                    "content",
                    libs.models.fields.SafeTextField(
                        default="",
                        help_text="Content of the appendix (for appendices only)",
                        max_length=5000,
                        verbose_name="Content",
                    ),
                ),
                (
                    "note",
                    libs.models.fields.SafeTextField(
                        blank=True, help_text="Additional notes", max_length=500, null=True, verbose_name="Note"
                    ),
                ),
                (
                    "attachment",
                    models.ForeignKey(
                        blank=True,
                        help_text="Attached contract file",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="contract_attachments",
                        to="files.filemodel",
                        verbose_name="Attachment",
                    ),
                ),
                (
                    "parent_contract",
                    models.ForeignKey(
                        blank=True,
                        help_text="Reference to parent contract (for appendices only)",
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="appendices",
                        to="hrm.contract",
                        verbose_name="Parent contract",
                    ),
                ),
                (
                    "contract_type",
                    models.ForeignKey(
                        help_text="Type of the contract",
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="contracts",
                        to="hrm.contracttype",
                        verbose_name="Contract type",
                    ),
                ),
                (
                    "employee",
                    models.ForeignKey(
                        help_text="Employee associated with this contract",
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="contracts",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
            ],
            options={
                "verbose_name": "Contract",
                "verbose_name_plural": "Contracts",
                "db_table": "hrm_contract",
                "ordering": ["-created_at"],
            },
        ),
        migrations.AddField(
            model_name="branch",
            name="director",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="directed_branches",
                to="hrm.employee",
                verbose_name="Branch director",
            ),
        ),
        migrations.AddField(
            model_name="block",
            name="director",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="directed_blocks",
                to="hrm.employee",
                verbose_name="Block director",
            ),
        ),
        migrations.CreateModel(
            name="BankAccount",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("account_number", models.CharField(max_length=20, verbose_name="Account number")),
                ("account_name", models.CharField(max_length=50, verbose_name="Account name")),
                ("is_primary", models.BooleanField(default=False, verbose_name="Is primary")),
                (
                    "bank",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="bank_accounts",
                        to="hrm.bank",
                        verbose_name="Bank",
                    ),
                ),
                (
                    "employee",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="bank_accounts",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
            ],
            options={
                "verbose_name": "Bank Account",
                "verbose_name_plural": "Bank Accounts",
                "db_table": "hrm_bank_account",
                "ordering": ["-is_primary", "-created_at"],
            },
        ),
        migrations.CreateModel(
            name="AttendanceRecord",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Code")),
                (
                    "attendance_type",
                    models.CharField(
                        choices=[
                            ("biometric_device", "Biometric Device"),
                            ("wifi", "WiFi"),
                            ("geolocation", "GeoLocation"),
                            ("other", "Other"),
                        ],
                        default="biometric_device",
                        help_text="Type of attendance method used",
                        max_length=20,
                        verbose_name="Attendance type",
                    ),
                ),
                (
                    "attendance_code",
                    models.CharField(
                        blank=True,
                        help_text="User ID from device, used to match with Employee.attendance_code",
                        max_length=20,
                        verbose_name="Attendance code",
                    ),
                ),
                (
                    "timestamp",
                    models.DateTimeField(
                        help_text="Date and time when attendance was recorded", verbose_name="Timestamp"
                    ),
                ),
                (
                    "latitude",
                    models.DecimalField(
                        blank=True,
                        decimal_places=17,
                        help_text="GeoLocation latitude coordinate (for geolocation attendance)",
                        max_digits=20,
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-90),
                            django.core.validators.MaxValueValidator(90),
                        ],
                        verbose_name="Latitude",
                    ),
                ),
                (
                    "longitude",
                    models.DecimalField(
                        blank=True,
                        decimal_places=17,
                        help_text="GeoLocation longitude coordinate (for geolocation attendance)",
                        max_digits=20,
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-180),
                            django.core.validators.MaxValueValidator(180),
                        ],
                        verbose_name="Longitude",
                    ),
                ),
                (
                    "is_valid",
                    models.BooleanField(
                        default=True, help_text="Whether this attendance record is valid", verbose_name="Is valid"
                    ),
                ),
                (
                    "notes",
                    libs.models.fields.SafeTextField(
                        blank=True,
                        help_text="Additional notes or comments about this attendance record",
                        verbose_name="Notes",
                    ),
                ),
                (
                    "raw_data",
                    models.JSONField(
                        blank=True,
                        help_text="Complete raw data from device for debugging purposes",
                        null=True,
                        verbose_name="Raw data",
                    ),
                ),
                (
                    "attendance_geolocation",
                    models.ForeignKey(
                        blank=True,
                        help_text="Geolocation reference (for geolocation attendance)",
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="attendance_records",
                        to="hrm.attendancegeolocation",
                        verbose_name="Attendance geolocation",
                    ),
                ),
                (
                    "biometric_device",
                    models.ForeignKey(
                        blank=True,
                        help_text="Attendance device that captured this record (for biometric device type)",
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="attendance_records",
                        to="hrm.attendancedevice",
                        verbose_name="Biometric Device",
                    ),
                ),
                (
                    "image",
                    models.ForeignKey(
                        blank=True,
                        help_text="Attendance photo (for geolocation attendance)",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="attendance_records",
                        to="files.filemodel",
                        verbose_name="Image",
                    ),
                ),
                (
                    "attendance_wifi_device",
                    models.ForeignKey(
                        blank=True,
                        help_text="WiFi device reference (for WiFi attendance)",
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="attendance_records",
                        to="hrm.attendancewifidevice",
                        verbose_name="WiFi device",
                    ),
                ),
                (
                    "employee",
                    models.ForeignKey(
                        blank=True,
                        help_text="Employee associated with this attendance record",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="attendance_records",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
            ],
            options={
                "verbose_name": "Attendance Record",
                "verbose_name_plural": "Attendance Records",
                "db_table": "hrm_attendance_record",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="AttendanceExemption",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "effective_date",
                    models.DateField(
                        blank=True,
                        help_text="Date when exemption becomes active",
                        null=True,
                        verbose_name="Effective Date",
                    ),
                ),
                (
                    "notes",
                    models.TextField(
                        blank=True, help_text="Additional notes or remarks", max_length=1000, verbose_name="Notes"
                    ),
                ),
                (
                    "employee",
                    models.OneToOneField(
                        help_text="Employee to be exempt from attendance tracking",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="attendance_exemption",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
            ],
            options={
                "verbose_name": "Attendance Exemption",
                "verbose_name_plural": "Attendance Exemptions",
                "db_table": "hrm_attendance_exemption",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="AttendanceDailyReport",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("report_date", models.DateField(verbose_name="Report date")),
                (
                    "need_refresh",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Indicates if this report needs to be recalculated by batch task",
                        verbose_name="Needs refresh",
                    ),
                ),
                (
                    "attendance_method",
                    models.CharField(
                        choices=[
                            ("biometric_device", "Biometric Device"),
                            ("wifi", "WiFi"),
                            ("geolocation", "GeoLocation"),
                            ("other", "Other"),
                        ],
                        max_length=20,
                        verbose_name="Attendance method",
                    ),
                ),
                (
                    "project",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        to="realestate.project",
                        verbose_name="Project",
                    ),
                ),
                (
                    "attendance_record",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="daily_reports",
                        to="hrm.attendancerecord",
                        verbose_name="Attendance record",
                    ),
                ),
                (
                    "block",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "department",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="hrm.department",
                        verbose_name="Department",
                    ),
                ),
                (
                    "employee",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="attendance_daily_reports",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
            ],
            options={
                "verbose_name": "Attendance Daily Report",
                "verbose_name_plural": "Attendance Daily Reports",
                "db_table": "hrm_attendance_daily_report",
            },
        ),
        migrations.CreateModel(
            name="EmployeeCertificate",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "code",
                    models.CharField(
                        blank=True,
                        editable=False,
                        help_text="Auto-generated unique code for this certificate",
                        max_length=50,
                        null=True,
                        unique=True,
                        verbose_name="Code",
                    ),
                ),
                (
                    "certificate_type",
                    models.CharField(
                        choices=[
                            ("foreign_language", "Foreign language certificate"),
                            ("computer", "Computer certificate"),
                            ("diploma", "Graduation diploma"),
                            ("other", "Other"),
                            ("broker_training_completion", "Broker training completion"),
                            ("real_estate_practice_license", "Real estate practice license"),
                        ],
                        help_text="Type of certificate",
                        max_length=50,
                        verbose_name="Certificate type",
                    ),
                ),
                (
                    "certificate_code",
                    models.CharField(
                        blank=True,
                        help_text="Certificate number or code issued by the certifying organization",
                        max_length=100,
                        verbose_name="Certificate code",
                    ),
                ),
                (
                    "certificate_name",
                    models.CharField(
                        blank=True,
                        help_text="Specific name of the certificate or exam",
                        max_length=100,
                        verbose_name="Certificate name",
                    ),
                ),
                (
                    "issue_date",
                    models.DateField(help_text="Date when the certificate was issued", verbose_name="Issue date"),
                ),
                (
                    "effective_date",
                    models.DateField(
                        blank=True,
                        help_text="Date when the certificate becomes effective",
                        null=True,
                        verbose_name="Effective date",
                    ),
                ),
                (
                    "expiry_date",
                    models.DateField(
                        blank=True,
                        help_text="Date when the certificate expires (if applicable)",
                        null=True,
                        verbose_name="Expiry date",
                    ),
                ),
                (
                    "issuing_organization",
                    models.CharField(
                        help_text="Organization that issued the certificate",
                        max_length=100,
                        verbose_name="Issuing organization",
                    ),
                ),
                (
                    "notes",
                    models.TextField(
                        blank=True, help_text="Additional notes about the certificate", verbose_name="Notes"
                    ),
                ),
                (
                    "training_specialization",
                    models.CharField(
                        blank=True,
                        help_text="Training specialization or major",
                        max_length=100,
                        null=True,
                        verbose_name="Training specialization",
                    ),
                ),
                (
                    "graduation_diploma",
                    models.CharField(
                        blank=True,
                        help_text="Graduation diploma or degree",
                        max_length=100,
                        null=True,
                        verbose_name="Graduation diploma",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[("Valid", "Valid"), ("Near Expiry", "Near Expiry"), ("Expired", "Expired")],
                        db_index=True,
                        default="Valid",
                        help_text="Certificate status based on expiry date",
                        max_length=20,
                        verbose_name="Status",
                    ),
                ),
                (
                    "attachment",
                    models.ForeignKey(
                        blank=True,
                        help_text="Uploaded certificate file",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="employee_certificates",
                        to="files.filemodel",
                        verbose_name="Certificate file",
                    ),
                ),
                (
                    "employee",
                    models.ForeignKey(
                        help_text="Employee who owns this certificate",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="certificates",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
            ],
            options={
                "verbose_name": "Employee certificate",
                "verbose_name_plural": "Employee certificates",
                "db_table": "hrm_employee_certificate",
                "ordering": ["certificate_type", "-created_at"],
            },
        ),
        migrations.CreateModel(
            name="EmployeeDependent",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "code",
                    models.CharField(
                        blank=True,
                        editable=False,
                        help_text="Auto-generated unique code for this dependent",
                        max_length=50,
                        null=True,
                        unique=True,
                        verbose_name="Code",
                    ),
                ),
                (
                    "dependent_name",
                    models.CharField(
                        help_text="Full name of the dependent", max_length=255, verbose_name="Dependent name"
                    ),
                ),
                (
                    "relationship",
                    models.CharField(
                        choices=[
                            ("CHILD", "Child"),
                            ("WIFE", "Wife"),
                            ("HUSBAND", "Husband"),
                            ("FATHER", "Father"),
                            ("MOTHER", "Mother"),
                            ("BROTHER", "Brother"),
                            ("SISTER", "Sister"),
                            ("SIBLING", "Sibling"),
                            ("GRANDFATHER", "Grandfather"),
                            ("GRANDMOTHER", "Grandmother"),
                            ("OTHER", "Other"),
                        ],
                        help_text="Type of relationship to the employee",
                        max_length=20,
                        verbose_name="Relationship",
                    ),
                ),
                (
                    "date_of_birth",
                    models.DateField(
                        blank=True, help_text="Date of birth of the dependent", null=True, verbose_name="Date of birth"
                    ),
                ),
                (
                    "citizen_id",
                    models.CharField(
                        blank=True,
                        help_text="National ID (CMND/CCCD) - 9 or 12 digits",
                        max_length=12,
                        validators=[apps.hrm.utils.validators.validate_national_id],
                        verbose_name="Citizen ID",
                    ),
                ),
                (
                    "effective_date",
                    models.DateField(
                        blank=True,
                        help_text="Start date for tax deduction applicability",
                        null=True,
                        verbose_name="Effective date",
                    ),
                ),
                (
                    "tax_code",
                    models.CharField(
                        blank=True, help_text="Tax identification number", max_length=50, verbose_name="Tax code"
                    ),
                ),
                (
                    "note",
                    models.TextField(blank=True, help_text="Additional notes or information", verbose_name="Note"),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=True, help_text="Whether this dependent record is active", verbose_name="Is active"
                    ),
                ),
                (
                    "attachment",
                    models.ForeignKey(
                        blank=True,
                        help_text="Supporting document or file attachment",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="employee_dependents",
                        to="files.filemodel",
                        verbose_name="Attachment",
                    ),
                ),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        help_text="User who created this record",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="created_dependents",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Created by",
                    ),
                ),
                (
                    "employee",
                    models.ForeignKey(
                        help_text="Employee associated with this dependent",
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="dependents",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
            ],
            options={
                "verbose_name": "Employee Dependent",
                "verbose_name_plural": "Employee Dependents",
                "db_table": "hrm_employee_dependent",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="EmployeeMonthlyTimesheet",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "need_refresh",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Indicates if this report needs to be recalculated by batch task",
                        verbose_name="Needs refresh",
                    ),
                ),
                ("report_date", models.DateField(verbose_name="Report date")),
                ("month_key", models.CharField(max_length=6, verbose_name="Month key")),
                (
                    "probation_working_days",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=6, verbose_name="Probation working days"
                    ),
                ),
                (
                    "official_working_days",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=6, verbose_name="Official working days"
                    ),
                ),
                (
                    "total_working_days",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=6, verbose_name="Total working days"
                    ),
                ),
                (
                    "official_hours",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=8, verbose_name="Official hours"
                    ),
                ),
                (
                    "overtime_hours",
                    models.DecimalField(
                        decimal_places=2,
                        default=Decimal("0.00"),
                        help_text="TODO: Check logic after SRS is updated",
                        max_digits=8,
                        verbose_name="Overtime hours",
                    ),
                ),
                (
                    "total_worked_hours",
                    models.DecimalField(
                        decimal_places=2,
                        default=Decimal("0.00"),
                        help_text="Sum of official_hours and overtime_hours",
                        max_digits=8,
                        verbose_name="Total worked hours",
                    ),
                ),
                (
                    "paid_leave_days",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=8, verbose_name="Paid leave days"
                    ),
                ),
                (
                    "unpaid_leave_days",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=8, verbose_name="Unpaid leave days"
                    ),
                ),
                (
                    "maternity_leave_days",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=8, verbose_name="Maternity leave days"
                    ),
                ),
                (
                    "public_holiday_days",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=8, verbose_name="Public holiday days"
                    ),
                ),
                (
                    "unexcused_absence_days",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=8, verbose_name="Unexcused absence days"
                    ),
                ),
                (
                    "carried_over_leave",
                    models.DecimalField(
                        decimal_places=2,
                        default=Decimal("0.00"),
                        max_digits=8,
                        verbose_name="Carried over leave from last year. Only applied for January. After that, this field must be set to 0.",
                    ),
                ),
                (
                    "opening_balance_leave_days",
                    models.DecimalField(
                        decimal_places=2,
                        default=Decimal("0.00"),
                        max_digits=8,
                        verbose_name="Opening balance leave days",
                    ),
                ),
                (
                    "consumed_leave_days",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=8, verbose_name="Consumed leave days"
                    ),
                ),
                (
                    "remaining_leave_days",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=8, verbose_name="Remaining leave days"
                    ),
                ),
                ("note", libs.models.fields.SafeTextField(blank=True, verbose_name="Note")),
                (
                    "employee",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="monthly_timesheets",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
            ],
            options={
                "verbose_name": "Employee monthly timesheet",
                "verbose_name_plural": "Employee monthly timesheets",
                "db_table": "hrm_employee_monthly_timesheet",
            },
        ),
        migrations.CreateModel(
            name="EmployeeRelationship",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "code",
                    models.CharField(
                        blank=True,
                        editable=False,
                        help_text="Auto-generated unique code for this relationship",
                        max_length=50,
                        null=True,
                        unique=True,
                        verbose_name="Code",
                    ),
                ),
                (
                    "employee_code",
                    models.CharField(
                        blank=True,
                        editable=False,
                        help_text="Cached employee code",
                        max_length=50,
                        verbose_name="Employee code",
                    ),
                ),
                (
                    "employee_name",
                    models.CharField(
                        blank=True,
                        editable=False,
                        help_text="Cached employee name",
                        max_length=255,
                        verbose_name="Employee name",
                    ),
                ),
                (
                    "relative_name",
                    models.CharField(
                        help_text="Full name of the relative", max_length=255, verbose_name="Relative name"
                    ),
                ),
                (
                    "relation_type",
                    models.CharField(
                        choices=[
                            ("CHILD", "Child"),
                            ("WIFE", "Wife"),
                            ("HUSBAND", "Husband"),
                            ("FATHER", "Father"),
                            ("MOTHER", "Mother"),
                            ("BROTHER", "Brother"),
                            ("SISTER", "Sister"),
                            ("SIBLING", "Sibling"),
                            ("GRANDFATHER", "Grandfather"),
                            ("GRANDMOTHER", "Grandmother"),
                            ("OTHER", "Other"),
                        ],
                        help_text="Type of relationship to the employee",
                        max_length=20,
                        verbose_name="Relation type",
                    ),
                ),
                (
                    "date_of_birth",
                    models.DateField(
                        blank=True, help_text="Date of birth of the relative", null=True, verbose_name="Date of birth"
                    ),
                ),
                (
                    "citizen_id",
                    models.CharField(
                        blank=True,
                        help_text="National ID (CMND/CCCD) - 9 or 12 digits",
                        max_length=12,
                        validators=[apps.hrm.utils.validators.validate_national_id],
                        verbose_name="Citizen ID",
                    ),
                ),
                (
                    "occupation",
                    models.CharField(
                        blank=True,
                        help_text="Occupation or job title of the relative",
                        max_length=255,
                        verbose_name="Occupation",
                    ),
                ),
                (
                    "tax_code",
                    models.CharField(
                        blank=True, help_text="Tax identification number", max_length=50, verbose_name="Tax code"
                    ),
                ),
                (
                    "address",
                    models.TextField(
                        blank=True, help_text="Residential address of the relative", verbose_name="Address"
                    ),
                ),
                (
                    "phone",
                    models.CharField(
                        blank=True,
                        help_text="Contact phone number",
                        max_length=20,
                        validators=[apps.hrm.utils.validators.validate_phone],
                        verbose_name="Phone",
                    ),
                ),
                (
                    "note",
                    models.TextField(blank=True, help_text="Additional notes or information", verbose_name="Note"),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=True, help_text="Whether this relationship record is active", verbose_name="Is active"
                    ),
                ),
                (
                    "attachment",
                    models.ForeignKey(
                        blank=True,
                        help_text="Supporting document or file attachment",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="relationship_attachments",
                        to="files.filemodel",
                        verbose_name="Attachment",
                    ),
                ),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        help_text="User who created this record",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="created_relationships",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Created by",
                    ),
                ),
                (
                    "employee",
                    models.ForeignKey(
                        help_text="Employee associated with this relationship",
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="relationships",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
            ],
            options={
                "verbose_name": "Employee Relationship",
                "verbose_name_plural": "Employee Relationships",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="EmployeeResignedReasonReport",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("report_date", models.DateField(verbose_name="Report date")),
                (
                    "need_refresh",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Indicates if this report needs to be recalculated by batch task",
                        verbose_name="Needs refresh",
                    ),
                ),
                ("count_resigned", models.IntegerField(default=0, verbose_name="Resigned count")),
                ("agreement_termination", models.IntegerField(default=0, verbose_name="Agreement Termination")),
                ("probation_fail", models.IntegerField(default=0, verbose_name="Probation Fail")),
                ("job_abandonment", models.IntegerField(default=0, verbose_name="Job Abandonment")),
                ("disciplinary_termination", models.IntegerField(default=0, verbose_name="Disciplinary Termination")),
                ("workforce_reduction", models.IntegerField(default=0, verbose_name="Workforce Reduction")),
                ("underperforming", models.IntegerField(default=0, verbose_name="Underperforming")),
                ("contract_expired", models.IntegerField(default=0, verbose_name="Contract Expired")),
                ("voluntary_health", models.IntegerField(default=0, verbose_name="Voluntary - Health Reasons")),
                ("voluntary_personal", models.IntegerField(default=0, verbose_name="Voluntary - Personal Reasons")),
                ("voluntary_career_change", models.IntegerField(default=0, verbose_name="Voluntary - Career Change")),
                ("voluntary_other", models.IntegerField(default=0, verbose_name="Voluntary - Other")),
                ("other", models.IntegerField(default=0, verbose_name="Other")),
                (
                    "block",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "department",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="hrm.department",
                        verbose_name="Department",
                    ),
                ),
            ],
            options={
                "verbose_name": "Employee Resigned Reason Report",
                "verbose_name_plural": "Employee Resigned Reason Reports",
                "db_table": "hrm_employee_resigned_reason_report",
            },
        ),
        migrations.CreateModel(
            name="EmployeeStatusBreakdownReport",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("report_date", models.DateField(verbose_name="Report date")),
                (
                    "need_refresh",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Indicates if this report needs to be recalculated by batch task",
                        verbose_name="Needs refresh",
                    ),
                ),
                ("count_active", models.IntegerField(default=0, verbose_name="Active count")),
                ("count_onboarding", models.IntegerField(default=0, verbose_name="Onboarding count")),
                ("count_maternity_leave", models.IntegerField(default=0, verbose_name="Maternity leave count")),
                ("count_unpaid_leave", models.IntegerField(default=0, verbose_name="Unpaid leave count")),
                ("count_resigned", models.IntegerField(default=0, verbose_name="Resigned count")),
                ("total_not_resigned", models.IntegerField(default=0, verbose_name="Total not resigned")),
                (
                    "count_resigned_reasons",
                    models.JSONField(default=dict, verbose_name="Resignation reasons breakdown"),
                ),
                (
                    "block",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "department",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="hrm.department",
                        verbose_name="Department",
                    ),
                ),
            ],
            options={
                "verbose_name": "Employee Status Breakdown Report",
                "verbose_name_plural": "Employee Status Breakdown Reports",
                "db_table": "hrm_employee_status_breakdown_report",
            },
        ),
        migrations.CreateModel(
            name="HiredCandidateReport",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("report_date", models.DateField(verbose_name="Report date")),
                (
                    "need_refresh",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Indicates if this report needs to be recalculated by batch task",
                        verbose_name="Needs refresh",
                    ),
                ),
                (
                    "source_type",
                    models.CharField(
                        choices=[
                            ("referral_source", "Referral Source"),
                            ("marketing_channel", "Marketing Channel"),
                            ("job_website_channel", "Job Website Channel"),
                            ("recruitment_department_source", "Recruitment Department Source"),
                            ("returning_employee", "Returning Employee"),
                        ],
                        max_length=50,
                        verbose_name="Source type",
                    ),
                ),
                (
                    "month_key",
                    models.CharField(
                        db_index=True,
                        help_text="Format: MM/YYYY for monthly aggregation",
                        max_length=7,
                        verbose_name="Month key",
                    ),
                ),
                (
                    "week_key",
                    models.CharField(
                        blank=True,
                        db_index=True,
                        help_text="Format: Week W - MM/YYYY for weekly aggregation",
                        max_length=20,
                        null=True,
                        verbose_name="Week key",
                    ),
                ),
                (
                    "num_candidates_hired",
                    models.PositiveIntegerField(default=0, verbose_name="Number of candidates hired"),
                ),
                (
                    "num_experienced",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="Candidates with prior work experience",
                        verbose_name="Number of experienced candidates",
                    ),
                ),
                (
                    "block",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "department",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.department",
                        verbose_name="Department",
                    ),
                ),
                (
                    "employee",
                    models.ForeignKey(
                        blank=True,
                        help_text="Only applicable for 'referral_source' type",
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="hired_candidate_reports",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
            ],
            options={
                "verbose_name": "Hired Candidate Report",
                "verbose_name_plural": "Hired Candidate Reports",
            },
        ),
        migrations.CreateModel(
            name="Holiday",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("name", models.CharField(max_length=255, verbose_name="Holiday name")),
                ("start_date", models.DateField(verbose_name="Start date")),
                ("end_date", models.DateField(verbose_name="End date")),
                ("notes", models.TextField(blank=True, verbose_name="Notes")),
            ],
            options={
                "verbose_name": "Holiday",
                "verbose_name_plural": "Holidays",
                "db_table": "hrm_holiday",
                "ordering": ["-start_date"],
                "indexes": [models.Index(fields=["start_date", "end_date"], name="hrm_holiday_start_d_e6bf97_idx")],
            },
        ),
        migrations.CreateModel(
            name="CompensatoryWorkday",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("date", models.DateField(verbose_name="Compensatory workday date")),
                (
                    "session",
                    models.CharField(
                        choices=[("morning", "Morning"), ("afternoon", "Afternoon"), ("full_day", "Full Day")],
                        default="full_day",
                        max_length=20,
                        verbose_name="Session",
                    ),
                ),
                ("notes", models.TextField(blank=True, verbose_name="Notes")),
                (
                    "holiday",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="compensatory_days",
                        to="hrm.holiday",
                        verbose_name="Holiday",
                    ),
                ),
            ],
            options={
                "verbose_name": "Compensatory Workday",
                "verbose_name_plural": "Compensatory Workdays",
                "db_table": "hrm_compensatory_workday",
                "ordering": ["date"],
            },
        ),
        migrations.CreateModel(
            name="InterviewSchedule",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("title", models.CharField(max_length=100, verbose_name="Title")),
                (
                    "interview_type",
                    models.CharField(
                        choices=[("IN_PERSON", "In Person"), ("ONLINE", "Online")],
                        default="IN_PERSON",
                        max_length=20,
                        verbose_name="Interview type",
                    ),
                ),
                ("location", models.CharField(max_length=200, verbose_name="Location")),
                ("time", models.DateTimeField(verbose_name="Interview time")),
                ("note", libs.models.fields.SafeTextField(blank=True, verbose_name="Note")),
                (
                    "interviewers",
                    models.ManyToManyField(
                        blank=True, related_name="interview_schedules", to="hrm.employee", verbose_name="Interviewers"
                    ),
                ),
            ],
            options={
                "verbose_name": "Interview Schedule",
                "verbose_name_plural": "Interview Schedules",
                "db_table": "hrm_interview_schedule",
                "ordering": ["-time"],
            },
        ),
        migrations.CreateModel(
            name="JobDescription",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Job description code")),
                ("title", models.CharField(max_length=200, verbose_name="Job title")),
                ("position_title", models.CharField(max_length=255, verbose_name="Position title")),
                ("responsibility", libs.models.fields.SafeTextField(verbose_name="Responsibility")),
                ("requirement", libs.models.fields.SafeTextField(verbose_name="Requirement")),
                (
                    "preferred_criteria",
                    libs.models.fields.SafeTextField(blank=True, verbose_name="Preferred criteria"),
                ),
                ("benefit", libs.models.fields.SafeTextField(verbose_name="Benefit")),
                ("proposed_salary", models.CharField(max_length=100, verbose_name="Proposed salary")),
                ("note", libs.models.fields.SafeTextField(blank=True, verbose_name="Note")),
                (
                    "attachment",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="job_descriptions",
                        to="files.filemodel",
                        verbose_name="Attachment",
                    ),
                ),
            ],
            options={
                "verbose_name": "Job Description",
                "verbose_name_plural": "Job Descriptions",
                "db_table": "hrm_job_description",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="EmployeeWorkHistory",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("date", models.DateField(help_text="Date of the work history event", verbose_name="Date")),
                (
                    "name",
                    models.CharField(
                        choices=[
                            ("Change Position", "Change Position"),
                            ("Change Status", "Change Status"),
                            ("Transfer", "Transfer"),
                            ("Change Contract", "Change Contract"),
                            ("Return to Work", "Return to Work"),
                        ],
                        help_text="Type of the work history event",
                        max_length=50,
                        verbose_name="Event type",
                    ),
                ),
                (
                    "detail",
                    models.TextField(
                        blank=True, help_text="Detailed description of the work history event", verbose_name="Details"
                    ),
                ),
                (
                    "note",
                    libs.models.fields.SafeTextField(
                        blank=True, help_text="Additional notes about the work history event", verbose_name="Note"
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("Active", "Active"),
                            ("Onboarding", "Onboarding"),
                            ("Resigned", "Resigned"),
                            ("Maternity Leave", "Maternity Leave"),
                            ("Unpaid Leave", "Unpaid Leave"),
                        ],
                        help_text="New employee status after the event (for state-change events)",
                        max_length=50,
                        null=True,
                        verbose_name="Status",
                    ),
                ),
                (
                    "from_date",
                    models.DateField(
                        blank=True, help_text="Start date of the event period", null=True, verbose_name="From date"
                    ),
                ),
                (
                    "to_date",
                    models.DateField(
                        blank=True, help_text="End date of the event period", null=True, verbose_name="To date"
                    ),
                ),
                (
                    "retain_seniority",
                    models.BooleanField(
                        blank=True,
                        help_text="For return to work events, whether seniority is retained or reset",
                        null=True,
                        verbose_name="Retain seniority",
                    ),
                ),
                (
                    "resignation_reason",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("AGREEMENT_TERMINATION", "Agreement Termination"),
                            ("PROBATION_FAIL", "Probation Fail"),
                            ("JOB_ABANDONMENT", "Job Abandonment"),
                            ("DISCIPLINARY_TERMINATION", "Disciplinary Termination"),
                            ("WORKFORCE_REDUCTION", "Workforce Reduction"),
                            ("UNDERPERFORMING", "Underperforming"),
                            ("CONTRACT_EXPIRED", "Contract Expired"),
                            ("VOLUNTARY_HEALTH", "Voluntary - Health Reasons"),
                            ("VOLUNTARY_PERSONAL", "Voluntary - Personal Reasons"),
                            ("VOLUNTARY_CAREER_CHANGE", "Voluntary - Career Change"),
                            ("VOLUNTARY_OTHER", "Voluntary - Other"),
                            ("OTHER", "Other"),
                        ],
                        help_text="Reason for resignation (if applicable)",
                        max_length=50,
                        null=True,
                        verbose_name="Resignation reason",
                    ),
                ),
                (
                    "previous_data",
                    models.JSONField(
                        blank=True,
                        help_text="JSON data storing previous values (status, branch_id, block_id, department_id, contract_type, contract_id)",
                        null=True,
                        verbose_name="Previous data",
                    ),
                ),
                (
                    "block",
                    models.ForeignKey(
                        blank=True,
                        help_text="Block (auto-populated from employee)",
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="employee_work_histories",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        blank=True,
                        help_text="Branch (auto-populated from employee)",
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="employee_work_histories",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "contract",
                    models.ForeignKey(
                        blank=True,
                        help_text="New contract for contract-change event",
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="employee_work_histories",
                        to="hrm.contracttype",
                        verbose_name="Contract",
                    ),
                ),
                (
                    "department",
                    models.ForeignKey(
                        blank=True,
                        help_text="Department (auto-populated from employee)",
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="employee_work_histories",
                        to="hrm.department",
                        verbose_name="Department",
                    ),
                ),
                (
                    "employee",
                    models.ForeignKey(
                        help_text="Employee associated with this work history record",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="work_histories",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
                (
                    "position",
                    models.ForeignKey(
                        blank=True,
                        help_text="Position (auto-populated from employee)",
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="employee_work_histories",
                        to="hrm.position",
                        verbose_name="Position",
                    ),
                ),
            ],
            options={
                "verbose_name": "Employee work history",
                "verbose_name_plural": "Employee work histories",
                "db_table": "hrm_employee_work_history",
                "ordering": ["-date", "-created_at"],
            },
        ),
        migrations.CreateModel(
            name="Proposal",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Proposal code")),
                ("proposal_date", models.DateField(auto_now_add=True, verbose_name="Proposal date")),
                (
                    "proposal_type",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("post_maternity_benefits", "Post-maternity benefits"),
                            ("late_exemption", "Late exemption"),
                            ("overtime_work", "Overtime work"),
                            ("paid_leave", "Paid leave"),
                            ("unpaid_leave", "Unpaid leave"),
                            ("maternity_leave", "Maternity leave"),
                            ("timesheet_entry_complaint", "Timesheet entry complaint"),
                            ("job_transfer", "Job Transfer"),
                            ("asset_allocation", "Asset Allocation"),
                            ("device_change", "Device Change"),
                        ],
                        max_length=64,
                        null=True,
                        verbose_name="Proposal type",
                    ),
                ),
                (
                    "proposal_status",
                    models.CharField(
                        choices=[("pending", "Pending"), ("approved", "Approved"), ("rejected", "Rejected")],
                        default="pending",
                        max_length=32,
                        verbose_name="Proposal status",
                    ),
                ),
                (
                    "note",
                    libs.models.fields.SafeTextField(
                        blank=True, null=True, verbose_name="Note for employee who create the proposal"
                    ),
                ),
                (
                    "approval_note",
                    libs.models.fields.SafeTextField(
                        blank=True, null=True, verbose_name="Note for employee who approve/reject the proposal"
                    ),
                ),
                ("approved_at", models.DateTimeField(blank=True, null=True, verbose_name="Approved at")),
                (
                    "timesheet_entry_complaint_complaint_reason",
                    libs.models.fields.SafeTextField(blank=True, null=True, verbose_name="Complaint reason"),
                ),
                (
                    "timesheet_entry_complaint_proposed_check_in_time",
                    models.TimeField(blank=True, null=True, verbose_name="Proposed check-in time"),
                ),
                (
                    "timesheet_entry_complaint_proposed_check_out_time",
                    models.TimeField(blank=True, null=True, verbose_name="Proposed check-out time"),
                ),
                (
                    "timesheet_entry_complaint_approved_check_in_time",
                    models.TimeField(blank=True, null=True, verbose_name="Approved check-in time"),
                ),
                (
                    "timesheet_entry_complaint_approved_check_out_time",
                    models.TimeField(blank=True, null=True, verbose_name="Approved check-out time"),
                ),
                (
                    "timesheet_entry_complaint_latitude",
                    models.DecimalField(
                        blank=True,
                        decimal_places=17,
                        help_text="Timesheet Entry Complaint Latitude coordinate",
                        max_digits=20,
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-90),
                            django.core.validators.MaxValueValidator(90),
                        ],
                        verbose_name="Latitude",
                    ),
                ),
                (
                    "timesheet_entry_complaint_longitude",
                    models.DecimalField(
                        blank=True,
                        decimal_places=17,
                        help_text="Timesheet Entry Complaint Longitude coordinate",
                        max_digits=20,
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-180),
                            django.core.validators.MaxValueValidator(180),
                        ],
                        verbose_name="Longitude",
                    ),
                ),
                (
                    "timesheet_entry_complaint_address",
                    models.CharField(
                        blank=True, max_length=255, null=True, verbose_name="Timesheet Entry Complaint Address"
                    ),
                ),
                (
                    "late_exemption_start_date",
                    models.DateField(blank=True, null=True, verbose_name="Late exemption start date"),
                ),
                (
                    "late_exemption_end_date",
                    models.DateField(blank=True, null=True, verbose_name="Late exemption end date"),
                ),
                (
                    "late_exemption_minutes",
                    models.PositiveIntegerField(blank=True, null=True, verbose_name="Late exemption minutes"),
                ),
                (
                    "post_maternity_benefits_start_date",
                    models.DateField(blank=True, null=True, verbose_name="Post-maternity benefits start date"),
                ),
                (
                    "post_maternity_benefits_end_date",
                    models.DateField(blank=True, null=True, verbose_name="Post-maternity benefits end date"),
                ),
                (
                    "maternity_leave_start_date",
                    models.DateField(blank=True, null=True, verbose_name="Maternity leave start date"),
                ),
                (
                    "maternity_leave_end_date",
                    models.DateField(blank=True, null=True, verbose_name="Maternity leave end date"),
                ),
                (
                    "maternity_leave_estimated_due_date",
                    models.DateField(blank=True, null=True, verbose_name="Maternity leave estimated due date"),
                ),
                (
                    "paid_leave_start_date",
                    models.DateField(blank=True, null=True, verbose_name="Paid leave start date"),
                ),
                ("paid_leave_end_date", models.DateField(blank=True, null=True, verbose_name="Paid leave end date")),
                (
                    "paid_leave_shift",
                    models.CharField(
                        blank=True,
                        choices=[("full_day", "Full Day"), ("morning", "Morning"), ("afternoon", "Afternoon")],
                        max_length=20,
                        null=True,
                        verbose_name="Paid leave shift",
                    ),
                ),
                (
                    "paid_leave_reason",
                    libs.models.fields.SafeTextField(
                        blank=True, max_length=500, null=True, verbose_name="Paid leave reason"
                    ),
                ),
                (
                    "unpaid_leave_start_date",
                    models.DateField(blank=True, null=True, verbose_name="Unpaid leave start date"),
                ),
                (
                    "unpaid_leave_end_date",
                    models.DateField(blank=True, null=True, verbose_name="Unpaid leave end date"),
                ),
                (
                    "unpaid_leave_shift",
                    models.CharField(
                        blank=True,
                        choices=[("full_day", "Full Day"), ("morning", "Morning"), ("afternoon", "Afternoon")],
                        max_length=20,
                        null=True,
                        verbose_name="Unpaid leave shift",
                    ),
                ),
                (
                    "unpaid_leave_reason",
                    libs.models.fields.SafeTextField(
                        blank=True, max_length=500, null=True, verbose_name="Unpaid leave reason"
                    ),
                ),
                (
                    "job_transfer_effective_date",
                    models.DateField(blank=True, null=True, verbose_name="Job transfer effective date"),
                ),
                (
                    "job_transfer_reason",
                    models.CharField(blank=True, max_length=250, null=True, verbose_name="Job transfer reason"),
                ),
                (
                    "device_change_new_device_id",
                    models.CharField(
                        blank=True,
                        help_text="New device ID being requested",
                        max_length=255,
                        null=True,
                        verbose_name="New device ID",
                    ),
                ),
                (
                    "device_change_new_platform",
                    models.CharField(
                        blank=True,
                        help_text="Platform of the new device (ios, android, web)",
                        max_length=20,
                        null=True,
                        verbose_name="New platform",
                    ),
                ),
                (
                    "device_change_old_device_id",
                    models.CharField(
                        blank=True,
                        help_text="Previous device ID (if any)",
                        max_length=255,
                        null=True,
                        verbose_name="Old device ID",
                    ),
                ),
                (
                    "device_change_contact_info",
                    libs.models.fields.SafeTextField(
                        blank=True,
                        help_text="Additional contact information or notes for device change request",
                        null=True,
                        verbose_name="Contact info / notes",
                    ),
                ),
                (
                    "approved_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="approved_proposals",
                        to="hrm.employee",
                        verbose_name="Approved by",
                    ),
                ),
                (
                    "created_by",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="created_proposals",
                        to="hrm.employee",
                        verbose_name="Created by",
                    ),
                ),
                (
                    "job_transfer_new_block",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="job_transfer_proposals",
                        to="hrm.block",
                        verbose_name="New block",
                    ),
                ),
                (
                    "job_transfer_new_branch",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="job_transfer_proposals",
                        to="hrm.branch",
                        verbose_name="New branch",
                    ),
                ),
                (
                    "job_transfer_new_department",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="job_transfer_proposals",
                        to="hrm.department",
                        verbose_name="New department",
                    ),
                ),
                (
                    "job_transfer_new_position",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="job_transfer_proposals",
                        to="hrm.position",
                        verbose_name="New position",
                    ),
                ),
                (
                    "maternity_leave_replacement_employee",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="replacement_for_maternity_proposals",
                        to="hrm.employee",
                        verbose_name="Replacement employee for maternity leave",
                    ),
                ),
                (
                    "timesheet_entry_complaint_complaint_image",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="timesheet_entry_complaint_proposals",
                        to="files.filemodel",
                        verbose_name="Timesheet Entry Complaint Image",
                    ),
                ),
            ],
            options={
                "verbose_name": "Proposal",
                "verbose_name_plural": "Proposals",
                "db_table": "hrm_proposal",
            },
        ),
        migrations.CreateModel(
            name="ProposalAsset",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("name", models.CharField(max_length=255, verbose_name="Asset name")),
                (
                    "unit_type",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("piece", "Piece"),
                            ("box", "Box"),
                            ("set", "Set"),
                            ("gram", "Gram"),
                            ("liter", "Liter"),
                            ("meter", "Meter"),
                            ("cylinder", "Cylinder"),
                            ("bag", "Bag"),
                        ],
                        max_length=32,
                        null=True,
                        verbose_name="Unit type",
                    ),
                ),
                ("quantity", models.PositiveIntegerField(verbose_name="Quantity")),
                ("note", libs.models.fields.SafeTextField(blank=True, max_length=250, null=True, verbose_name="Note")),
                (
                    "proposal",
                    models.ForeignKey(
                        limit_choices_to={"proposal_type": "asset_allocation"},
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="assets",
                        to="hrm.proposal",
                        verbose_name="Proposal",
                    ),
                ),
            ],
            options={
                "verbose_name": "Proposal Asset",
                "verbose_name_plural": "Proposal Assets",
                "db_table": "hrm_proposal_asset",
            },
        ),
        migrations.CreateModel(
            name="ProposalOvertimeEntry",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("date", models.DateField(verbose_name="Overtime date")),
                ("start_time", models.TimeField(verbose_name="Start time")),
                ("end_time", models.TimeField(verbose_name="End time")),
                (
                    "description",
                    libs.models.fields.SafeTextField(
                        blank=True, max_length=250, null=True, verbose_name="Description"
                    ),
                ),
                (
                    "proposal",
                    models.ForeignKey(
                        limit_choices_to={"proposal_type": "overtime_work"},
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="overtime_entries",
                        to="hrm.proposal",
                        verbose_name="Proposal",
                    ),
                ),
            ],
            options={
                "verbose_name": "Proposal Overtime Entry",
                "verbose_name_plural": "Proposal Overtime Entries",
                "db_table": "hrm_proposal_overtime_entry",
            },
        ),
        migrations.CreateModel(
            name="ProposalVerifier",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "status",
                    models.CharField(
                        choices=[("pending", "Pending"), ("verified", "Verified"), ("not_verified", "Not verified")],
                        default="pending",
                        max_length=32,
                        verbose_name="Status",
                    ),
                ),
                ("verified_time", models.DateTimeField(blank=True, null=True, verbose_name="Verified time")),
                ("note", libs.models.fields.SafeTextField(blank=True, null=True, verbose_name="Note")),
                (
                    "employee",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="verifiable_proposals",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
                (
                    "proposal",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="verifiers",
                        to="hrm.proposal",
                        verbose_name="Proposal",
                    ),
                ),
            ],
            options={
                "verbose_name": "Proposal Verifier",
                "verbose_name_plural": "Proposal Verifiers",
                "db_table": "hrm_proposal_verifier",
            },
        ),
        migrations.CreateModel(
            name="RecruitmentCandidate",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Candidate code")),
                ("name", models.CharField(max_length=200, verbose_name="Candidate name")),
                (
                    "citizen_id",
                    models.CharField(
                        max_length=12,
                        unique=True,
                        validators=[
                            django.core.validators.RegexValidator(
                                message="Citizen ID must contain from 9 to 12 digits", regex="^\\d{9,12}$"
                            )
                        ],
                        verbose_name="Citizen ID",
                    ),
                ),
                ("email", models.EmailField(max_length=254, verbose_name="Email")),
                ("phone", models.CharField(max_length=20, verbose_name="Phone")),
                (
                    "years_of_experience",
                    models.CharField(
                        choices=[
                            ("NO_EXPERIENCE", "No Experience"),
                            ("LESS_THAN_ONE_YEAR", "Less Than One Year"),
                            ("ONE_TO_THREE_YEARS", "1-3 Years"),
                            ("THREE_TO_FIVE_YEARS", "3-5 Years"),
                            ("MORE_THAN_FIVE_YEARS", "More Than 5 Years"),
                        ],
                        default="NO_EXPERIENCE",
                        max_length=30,
                        verbose_name="Years of experience",
                    ),
                ),
                ("submitted_date", models.DateField(verbose_name="Submitted date")),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("CONTACTED", "Contacted"),
                            ("INTERVIEW_SCHEDULED_1", "Interview Scheduled 1"),
                            ("INTERVIEWED_1", "Interviewed 1"),
                            ("INTERVIEW_SCHEDULED_2", "Interview Scheduled 2"),
                            ("INTERVIEWED_2", "Interviewed 2"),
                            ("HIRED", "Hired"),
                            ("REJECTED", "Rejected"),
                        ],
                        default="CONTACTED",
                        max_length=30,
                        verbose_name="Status",
                    ),
                ),
                ("onboard_date", models.DateField(blank=True, null=True, verbose_name="Onboard date")),
                ("note", models.TextField(blank=True, verbose_name="Note")),
                (
                    "block",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="recruitment_candidates",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="recruitment_candidates",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "department",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="recruitment_candidates",
                        to="hrm.department",
                        verbose_name="Department",
                    ),
                ),
                (
                    "employee",
                    models.OneToOneField(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="related_candidate",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
                (
                    "referrer",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="referred_candidates",
                        to="hrm.employee",
                        verbose_name="Referrer",
                    ),
                ),
                (
                    "recruitment_channel",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="candidates",
                        to="hrm.recruitmentchannel",
                        verbose_name="Recruitment channel",
                    ),
                ),
            ],
            options={
                "verbose_name": "Recruitment Candidate",
                "verbose_name_plural": "Recruitment Candidates",
                "db_table": "hrm_recruitment_candidate",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="InterviewCandidate",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("interview_time", models.DateTimeField(verbose_name="Interview time")),
                ("email_sent_at", models.DateTimeField(blank=True, null=True, verbose_name="Email sent at")),
                (
                    "interview_schedule",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="interview_candidates",
                        to="hrm.interviewschedule",
                        verbose_name="Interview schedule",
                    ),
                ),
                (
                    "recruitment_candidate",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="interview_candidates",
                        to="hrm.recruitmentcandidate",
                        verbose_name="Recruitment candidate",
                    ),
                ),
            ],
            options={
                "verbose_name": "Interview Candidate",
                "verbose_name_plural": "Interview Candidates",
                "db_table": "hrm_interview_candidate",
                "ordering": ["interview_time"],
            },
        ),
        migrations.AddField(
            model_name="employee",
            name="recruitment_candidate",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="employees",
                to="hrm.recruitmentcandidate",
                verbose_name="Recruitment Candidate",
            ),
        ),
        migrations.CreateModel(
            name="RecruitmentCandidateContactLog",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("date", models.DateField(verbose_name="Contact date")),
                ("method", models.CharField(max_length=100, verbose_name="Contact method")),
                ("note", models.TextField(blank=True, verbose_name="Note")),
                (
                    "employee",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="candidate_contact_logs",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
                (
                    "recruitment_candidate",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="contact_logs",
                        to="hrm.recruitmentcandidate",
                        verbose_name="Recruitment candidate",
                    ),
                ),
            ],
            options={
                "verbose_name": "Recruitment Candidate Contact Log",
                "verbose_name_plural": "Recruitment Candidate Contact Logs",
                "db_table": "hrm_recruitment_candidate_contact_log",
                "ordering": ["-date", "-created_at"],
            },
        ),
        migrations.CreateModel(
            name="RecruitmentChannelReport",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("report_date", models.DateField(verbose_name="Report date")),
                (
                    "need_refresh",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Indicates if this report needs to be recalculated by batch task",
                        verbose_name="Needs refresh",
                    ),
                ),
                ("num_hires", models.PositiveIntegerField(default=0, verbose_name="Number of hires")),
                (
                    "block",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "department",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.department",
                        verbose_name="Department",
                    ),
                ),
                (
                    "recruitment_channel",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="channel_reports",
                        to="hrm.recruitmentchannel",
                        verbose_name="Recruitment channel",
                    ),
                ),
            ],
            options={
                "verbose_name": "Recruitment Channel Report",
                "verbose_name_plural": "Recruitment Channel Reports",
            },
        ),
        migrations.CreateModel(
            name="RecruitmentCostReport",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("report_date", models.DateField(verbose_name="Report date")),
                (
                    "need_refresh",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Indicates if this report needs to be recalculated by batch task",
                        verbose_name="Needs refresh",
                    ),
                ),
                (
                    "source_type",
                    models.CharField(
                        choices=[
                            ("referral_source", "Referral Source"),
                            ("marketing_channel", "Marketing Channel"),
                            ("job_website_channel", "Job Website Channel"),
                            ("recruitment_department_source", "Recruitment Department Source"),
                            ("returning_employee", "Returning Employee"),
                        ],
                        max_length=50,
                        verbose_name="Source type",
                    ),
                ),
                (
                    "month_key",
                    models.CharField(
                        db_index=True,
                        help_text="Format: YYYY-MM for monthly aggregation",
                        max_length=7,
                        verbose_name="Month key",
                    ),
                ),
                (
                    "total_cost",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name="Total cost"),
                ),
                ("num_hires", models.PositiveIntegerField(default=0, verbose_name="Number of hires")),
                (
                    "avg_cost_per_hire",
                    models.DecimalField(
                        decimal_places=2, default=0, max_digits=15, verbose_name="Average cost per hire"
                    ),
                ),
                (
                    "block",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "department",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.department",
                        verbose_name="Department",
                    ),
                ),
            ],
            options={
                "verbose_name": "Recruitment Cost Report",
                "verbose_name_plural": "Recruitment Cost Reports",
            },
        ),
        migrations.CreateModel(
            name="RecruitmentRequest",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("code", models.CharField(max_length=50, unique=True, verbose_name="Request code")),
                ("name", models.CharField(max_length=255, verbose_name="Request name")),
                (
                    "recruitment_type",
                    models.CharField(
                        choices=[("NEW_HIRE", "New Hire"), ("REPLACEMENT", "Replacement")],
                        max_length=20,
                        verbose_name="Recruitment type",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[("DRAFT", "Draft"), ("OPEN", "Open"), ("PAUSED", "Paused"), ("CLOSED", "Closed")],
                        default="DRAFT",
                        max_length=20,
                        verbose_name="Status",
                    ),
                ),
                ("proposed_salary", models.CharField(max_length=100, verbose_name="Proposed salary")),
                ("number_of_positions", models.IntegerField(default=1, verbose_name="Number of positions")),
                (
                    "block",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="recruitment_requests",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="recruitment_requests",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "department",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="recruitment_requests",
                        to="hrm.department",
                        verbose_name="Department",
                    ),
                ),
                (
                    "job_description",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="recruitment_requests",
                        to="hrm.jobdescription",
                        verbose_name="Job description",
                    ),
                ),
                (
                    "proposer",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="proposed_recruitment_requests",
                        to="hrm.employee",
                        verbose_name="Proposer",
                    ),
                ),
            ],
            options={
                "verbose_name": "Recruitment Request",
                "verbose_name_plural": "Recruitment Requests",
                "db_table": "hrm_recruitment_request",
                "ordering": ["-created_at"],
            },
        ),
        migrations.AddField(
            model_name="recruitmentcandidate",
            name="recruitment_request",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name="candidates",
                to="hrm.recruitmentrequest",
                verbose_name="Recruitment request",
            ),
        ),
        migrations.AddField(
            model_name="interviewschedule",
            name="recruitment_request",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name="interview_schedules",
                to="hrm.recruitmentrequest",
                verbose_name="Recruitment request",
            ),
        ),
        migrations.CreateModel(
            name="RecruitmentExpense",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("date", models.DateField(verbose_name="Expense date")),
                (
                    "num_candidates_participated",
                    models.PositiveIntegerField(default=0, verbose_name="Number of candidates participated"),
                ),
                ("total_cost", models.DecimalField(decimal_places=2, max_digits=15, verbose_name="Total cost")),
                (
                    "num_candidates_hired",
                    models.PositiveIntegerField(default=0, verbose_name="Number of candidates hired"),
                ),
                ("activity", models.TextField(blank=True, max_length=1000, verbose_name="Activity description")),
                ("note", models.TextField(blank=True, max_length=500, verbose_name="Note")),
                (
                    "recruitment_channel",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="expenses",
                        to="hrm.recruitmentchannel",
                        verbose_name="Recruitment channel",
                    ),
                ),
                (
                    "referee",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="referee_expenses",
                        to="hrm.employee",
                        verbose_name="Referee",
                    ),
                ),
                (
                    "referrer",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="referrer_expenses",
                        to="hrm.employee",
                        verbose_name="Referrer",
                    ),
                ),
                (
                    "recruitment_request",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="expenses",
                        to="hrm.recruitmentrequest",
                        verbose_name="Recruitment request",
                    ),
                ),
                (
                    "recruitment_source",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="expenses",
                        to="hrm.recruitmentsource",
                        verbose_name="Recruitment source",
                    ),
                ),
            ],
            options={
                "verbose_name": "Recruitment Expense",
                "verbose_name_plural": "Recruitment Expenses",
                "db_table": "hrm_recruitment_expense",
                "ordering": ["-created_at"],
            },
        ),
        migrations.AddField(
            model_name="recruitmentcandidate",
            name="recruitment_source",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name="candidates",
                to="hrm.recruitmentsource",
                verbose_name="Recruitment source",
            ),
        ),
        migrations.CreateModel(
            name="RecruitmentSourceReport",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("report_date", models.DateField(verbose_name="Report date")),
                (
                    "need_refresh",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Indicates if this report needs to be recalculated by batch task",
                        verbose_name="Needs refresh",
                    ),
                ),
                ("num_hires", models.PositiveIntegerField(default=0, verbose_name="Number of hires")),
                (
                    "block",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "department",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.department",
                        verbose_name="Department",
                    ),
                ),
                (
                    "recruitment_source",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="source_reports",
                        to="hrm.recruitmentsource",
                        verbose_name="Recruitment source",
                    ),
                ),
            ],
            options={
                "verbose_name": "Recruitment Source Report",
                "verbose_name_plural": "Recruitment Source Reports",
            },
        ),
        migrations.CreateModel(
            name="StaffGrowthReport",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("report_date", models.DateField(verbose_name="Report date")),
                (
                    "need_refresh",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Indicates if this report needs to be recalculated by batch task",
                        verbose_name="Needs refresh",
                    ),
                ),
                (
                    "month_key",
                    models.CharField(
                        db_index=True,
                        help_text="Format: MM/YYYY for monthly aggregation",
                        max_length=7,
                        verbose_name="Month key",
                    ),
                ),
                (
                    "week_key",
                    models.CharField(
                        blank=True,
                        db_index=True,
                        help_text="Format: Week W - MM/YYYY for weekly aggregation",
                        max_length=20,
                        null=True,
                        verbose_name="Week key",
                    ),
                ),
                ("num_introductions", models.PositiveIntegerField(default=0, verbose_name="Number of introductions")),
                ("num_returns", models.PositiveIntegerField(default=0, verbose_name="Number of returns")),
                (
                    "num_recruitment_source",
                    models.PositiveIntegerField(default=0, verbose_name="Number of new recruitment source"),
                ),
                ("num_transfers", models.PositiveIntegerField(default=0, verbose_name="Number of transfers")),
                ("num_resignations", models.PositiveIntegerField(default=0, verbose_name="Number of resignations")),
                (
                    "block",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.block",
                        verbose_name="Block",
                    ),
                ),
                (
                    "branch",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.branch",
                        verbose_name="Branch",
                    ),
                ),
                (
                    "department",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="%(class)s_reports",
                        to="hrm.department",
                        verbose_name="Department",
                    ),
                ),
            ],
            options={
                "verbose_name": "Staff Growth Report",
                "verbose_name_plural": "Staff Growth Reports",
            },
        ),
        migrations.CreateModel(
            name="TimeSheetEntry",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("date", models.DateField(verbose_name="Date")),
                ("start_time", models.DateTimeField(blank=True, null=True, verbose_name="Start time")),
                ("end_time", models.DateTimeField(blank=True, null=True, verbose_name="End time")),
                (
                    "morning_hours",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=5, verbose_name="Morning hours"
                    ),
                ),
                (
                    "afternoon_hours",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=5, verbose_name="Afternoon hours"
                    ),
                ),
                (
                    "official_hours",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=5, verbose_name="Official hours"
                    ),
                ),
                (
                    "overtime_hours",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=5, verbose_name="Overtime hours"
                    ),
                ),
                (
                    "total_worked_hours",
                    models.DecimalField(
                        decimal_places=2, default=Decimal("0.00"), max_digits=6, verbose_name="Total worked hours"
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[("on_time", "On time"), ("not_on_time", "Not on time"), ("absent", "Absent")],
                        default="absent",
                        max_length=32,
                        verbose_name="Status",
                    ),
                ),
                (
                    "absent_reason",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("paid_leave", "Paid leave"),
                            ("unpaid_leave", "Unpaid leave"),
                            ("maternity_leave", "Maternity leave"),
                            ("public_holiday", "Public holiday"),
                            ("unexcused_absence", "Unexcused Absence"),
                        ],
                        max_length=64,
                        null=True,
                        verbose_name="Absent reason",
                    ),
                ),
                ("is_full_salary", models.BooleanField(default=True, verbose_name="Is full salary")),
                ("count_for_payroll", models.BooleanField(default=True, verbose_name="Count for payroll")),
                ("is_manually_corrected", models.BooleanField(default=False, verbose_name="Is manually corrected")),
                ("note", libs.models.fields.SafeTextField(blank=True, verbose_name="Note")),
                (
                    "employee",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="timesheets",
                        to="hrm.employee",
                        verbose_name="Employee",
                    ),
                ),
            ],
            options={
                "verbose_name": "Timesheet",
                "verbose_name_plural": "Timesheets",
                "db_table": "hrm_timesheet",
            },
        ),
        migrations.CreateModel(
            name="ProposalTimeSheetEntry",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "proposal",
                    models.ForeignKey(
                        limit_choices_to={"proposal_type": "timesheet_entry_complaint"},
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="timesheet_entries",
                        to="hrm.proposal",
                        verbose_name="Proposal",
                    ),
                ),
                (
                    "timesheet_entry",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="proposals",
                        to="hrm.timesheetentry",
                        verbose_name="Timesheet entry",
                    ),
                ),
            ],
            options={
                "verbose_name": "Proposal Timesheet Entry",
                "verbose_name_plural": "Proposal Timesheet Entries",
                "db_table": "hrm_proposal_timesheet_entry",
            },
        ),
        migrations.AddIndex(
            model_name="attendancegeolocation",
            index=models.Index(fields=["project", "status"], name="hrm_attenda_project_33e2c6_idx"),
        ),
        migrations.AddIndex(
            model_name="attendancegeolocation",
            index=models.Index(fields=["deleted"], name="hrm_attenda_deleted_89efb4_idx"),
        ),
        migrations.AlterUniqueTogether(
            name="department",
            unique_together={("code", "block")},
        ),
        migrations.AddIndex(
            model_name="decision",
            index=models.Index(fields=["decision_number"], name="decision_number_idx"),
        ),
        migrations.AddIndex(
            model_name="decision",
            index=models.Index(fields=["signing_date"], name="decision_signing_date_idx"),
        ),
        migrations.AddIndex(
            model_name="decision",
            index=models.Index(fields=["effective_date"], name="decision_effective_date_idx"),
        ),
        migrations.AddIndex(
            model_name="decision",
            index=models.Index(fields=["signing_status"], name="decision_signing_status_idx"),
        ),
        migrations.AddIndex(
            model_name="contract",
            index=models.Index(fields=["code"], name="contract_code_idx"),
        ),
        migrations.AddIndex(
            model_name="contract",
            index=models.Index(fields=["contract_number"], name="contract_number_idx"),
        ),
        migrations.AddIndex(
            model_name="contract",
            index=models.Index(fields=["status"], name="contract_status_idx"),
        ),
        migrations.AddIndex(
            model_name="contract",
            index=models.Index(fields=["effective_date"], name="contract_effective_date_idx"),
        ),
        migrations.AddIndex(
            model_name="contract",
            index=models.Index(fields=["expiration_date"], name="contract_expiration_date_idx"),
        ),
        migrations.AlterUniqueTogether(
            name="block",
            unique_together={("code", "branch")},
        ),
        migrations.AddConstraint(
            model_name="bankaccount",
            constraint=models.UniqueConstraint(
                condition=models.Q(("is_primary", True)),
                fields=("employee",),
                name="unique_primary_bank_account_per_employee",
            ),
        ),
        migrations.AddIndex(
            model_name="attendancerecord",
            index=models.Index(fields=["attendance_code", "-timestamp"], name="hrm_attenda_attenda_ffc559_idx"),
        ),
        migrations.AddIndex(
            model_name="attendancerecord",
            index=models.Index(fields=["biometric_device", "-timestamp"], name="hrm_attenda_biometr_77d2a0_idx"),
        ),
        migrations.AddIndex(
            model_name="attendancerecord",
            index=models.Index(fields=["employee", "-timestamp"], name="hrm_attenda_employe_e31335_idx"),
        ),
        migrations.AddIndex(
            model_name="attendancerecord",
            index=models.Index(fields=["attendance_type", "-timestamp"], name="hrm_attenda_attenda_9177f3_idx"),
        ),
        migrations.AddIndex(
            model_name="attendancerecord",
            index=models.Index(fields=["-timestamp"], name="hrm_attenda_timesta_8657e9_idx"),
        ),
        migrations.AddIndex(
            model_name="attendanceexemption",
            index=models.Index(fields=["employee"], name="hrm_attenda_employe_2128ab_idx"),
        ),
        migrations.AddIndex(
            model_name="attendanceexemption",
            index=models.Index(fields=["effective_date"], name="hrm_attenda_effecti_e85380_idx"),
        ),
        migrations.AddIndex(
            model_name="attendancedailyreport",
            index=models.Index(fields=["report_date"], name="hrm_attenda_report__fc7e9c_idx"),
        ),
        migrations.AddIndex(
            model_name="attendancedailyreport",
            index=models.Index(fields=["branch", "block", "department"], name="hrm_attenda_branch__2de2ed_idx"),
        ),
        migrations.AddIndex(
            model_name="attendancedailyreport",
            index=models.Index(fields=["project"], name="hrm_attenda_project_a36cb6_idx"),
        ),
        migrations.AddIndex(
            model_name="attendancedailyreport",
            index=models.Index(fields=["attendance_method"], name="hrm_attenda_attenda_d309fb_idx"),
        ),
        migrations.AlterUniqueTogether(
            name="attendancedailyreport",
            unique_together={("report_date", "employee")},
        ),
        migrations.AddIndex(
            model_name="employeecertificate",
            index=models.Index(fields=["employee", "certificate_type"], name="hrm_employe_employe_287b98_idx"),
        ),
        migrations.AddIndex(
            model_name="employeecertificate",
            index=models.Index(fields=["certificate_code"], name="hrm_employe_certifi_f69eb7_idx"),
        ),
        migrations.AddIndex(
            model_name="employeecertificate",
            index=models.Index(fields=["issue_date"], name="hrm_employe_issue_d_2a8496_idx"),
        ),
        migrations.AddIndex(
            model_name="employeecertificate",
            index=models.Index(fields=["effective_date"], name="hrm_employe_effecti_bcd132_idx"),
        ),
        migrations.AddIndex(
            model_name="employeecertificate",
            index=models.Index(fields=["expiry_date"], name="hrm_employe_expiry__e902ce_idx"),
        ),
        migrations.AddIndex(
            model_name="employeecertificate",
            index=models.Index(fields=["status"], name="hrm_employe_status_320c12_idx"),
        ),
        migrations.AddIndex(
            model_name="employeedependent",
            index=models.Index(fields=["employee", "is_active"], name="hrm_employe_employe_12d73e_idx"),
        ),
        migrations.AddIndex(
            model_name="employeedependent",
            index=models.Index(fields=["citizen_id"], name="hrm_employe_citizen_1858af_idx"),
        ),
        migrations.AddIndex(
            model_name="employeedependent",
            index=models.Index(fields=["dependent_name"], name="hrm_employe_depende_7640f0_idx"),
        ),
        migrations.AddIndex(
            model_name="employeedependent",
            index=models.Index(fields=["relationship"], name="hrm_employe_relatio_3054f9_idx"),
        ),
        migrations.AddIndex(
            model_name="employeemonthlytimesheet",
            index=models.Index(fields=["employee", "month_key"], name="idx_employee_month_key"),
        ),
        migrations.AddIndex(
            model_name="employeemonthlytimesheet",
            index=models.Index(fields=["report_date"], name="idx_monthly_report_date"),
        ),
        migrations.AddConstraint(
            model_name="employeemonthlytimesheet",
            constraint=models.UniqueConstraint(fields=("employee", "month_key"), name="uniq_employee_month_key"),
        ),
        migrations.AddIndex(
            model_name="employeerelationship",
            index=models.Index(fields=["employee", "is_active"], name="hrm_employe_employe_eac051_idx"),
        ),
        migrations.AddIndex(
            model_name="employeerelationship",
            index=models.Index(fields=["citizen_id"], name="hrm_employe_citizen_2b54df_idx"),
        ),
        migrations.AddIndex(
            model_name="employeeresignedreasonreport",
            index=models.Index(fields=["report_date"], name="hrm_employe_report__58d55a_idx"),
        ),
        migrations.AddIndex(
            model_name="employeeresignedreasonreport",
            index=models.Index(fields=["branch", "block", "department"], name="hrm_employe_branch__925fcb_idx"),
        ),
        migrations.AlterUniqueTogether(
            name="employeeresignedreasonreport",
            unique_together={("report_date", "branch", "block", "department")},
        ),
        migrations.AddIndex(
            model_name="employeestatusbreakdownreport",
            index=models.Index(fields=["report_date"], name="hrm_employe_report__da1685_idx"),
        ),
        migrations.AddIndex(
            model_name="employeestatusbreakdownreport",
            index=models.Index(fields=["branch", "block", "department"], name="hrm_employe_branch__b02471_idx"),
        ),
        migrations.AlterUniqueTogether(
            name="employeestatusbreakdownreport",
            unique_together={("report_date", "branch", "block", "department")},
        ),
        migrations.AddIndex(
            model_name="compensatoryworkday",
            index=models.Index(fields=["date"], name="hrm_compens_date_4f6a69_idx"),
        ),
        migrations.AddConstraint(
            model_name="compensatoryworkday",
            constraint=models.UniqueConstraint(
                fields=("holiday", "date"),
                name="unique_holiday_compensatory_date",
                violation_error_message="A compensatory workday with this date already exists for this holiday",
            ),
        ),
        migrations.AddIndex(
            model_name="employeeworkhistory",
            index=models.Index(fields=["employee", "date"], name="hrm_employe_employe_92aac1_idx"),
        ),
        migrations.AddIndex(
            model_name="employeeworkhistory",
            index=models.Index(fields=["branch"], name="hrm_employe_branch__0313ae_idx"),
        ),
        migrations.AddIndex(
            model_name="employeeworkhistory",
            index=models.Index(fields=["block"], name="hrm_employe_block_i_5c7432_idx"),
        ),
        migrations.AddIndex(
            model_name="employeeworkhistory",
            index=models.Index(fields=["department"], name="hrm_employe_departm_b2b69a_idx"),
        ),
        migrations.AddIndex(
            model_name="employeeworkhistory",
            index=models.Index(fields=["position"], name="hrm_employe_positio_47ccd7_idx"),
        ),
        migrations.AddIndex(
            model_name="employeeworkhistory",
            index=models.Index(fields=["date"], name="hrm_employe_date_84ca01_idx"),
        ),
        migrations.AddIndex(
            model_name="proposal",
            index=models.Index(fields=["proposal_status"], name="proposal_status_idx"),
        ),
        migrations.AddIndex(
            model_name="proposal",
            index=models.Index(fields=["proposal_date"], name="proposal_date_idx"),
        ),
        migrations.AddIndex(
            model_name="proposalasset",
            index=models.Index(fields=["proposal"], name="pa_proposal_idx"),
        ),
        migrations.AddIndex(
            model_name="proposalovertimeentry",
            index=models.Index(fields=["proposal"], name="poe_proposal_idx"),
        ),
        migrations.AddIndex(
            model_name="proposalovertimeentry",
            index=models.Index(fields=["date"], name="poe_date_idx"),
        ),
        migrations.AddIndex(
            model_name="proposalverifier",
            index=models.Index(fields=["proposal"], name="pv_proposal_idx"),
        ),
        migrations.AddIndex(
            model_name="proposalverifier",
            index=models.Index(fields=["employee"], name="pv_employee_idx"),
        ),
        migrations.AlterUniqueTogether(
            name="proposalverifier",
            unique_together={("proposal", "employee")},
        ),
        migrations.AlterUniqueTogether(
            name="interviewcandidate",
            unique_together={("recruitment_candidate", "interview_schedule")},
        ),
        migrations.AddConstraint(
            model_name="employee",
            constraint=models.UniqueConstraint(
                condition=models.Q(("tax_code__isnull", False), models.Q(("tax_code", ""), _negated=True)),
                fields=("tax_code",),
                name="unique_tax_code_when_not_null",
            ),
        ),
        migrations.AddIndex(
            model_name="timesheetentry",
            index=models.Index(fields=["employee", "date"], name="timesheet_employee_date_idx"),
        ),
        migrations.AddIndex(
            model_name="proposaltimesheetentry",
            index=models.Index(fields=["proposal"], name="pt_proposal_idx"),
        ),
        migrations.AddIndex(
            model_name="proposaltimesheetentry",
            index=models.Index(fields=["timesheet_entry"], name="pt_entry_idx"),
        ),
        migrations.AlterUniqueTogether(
            name="proposaltimesheetentry",
            unique_together={("proposal", "timesheet_entry")},
        ),
    ]
